(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{ATMH:function(e,t,a){"use strict";a.r(t);var o=a("YEIV"),i=a.n(o),r=a("GQeE"),l=a.n(r),n={name:"userControl",data:function(){var e=this;return{rules:{moveOutTime:[{required:!0,message:"搬出时间未选择",trigger:"change"}],moveOutReason:[{required:!0,message:"搬出原因不能为空",trigger:"change"}]},dialogDate:{},open:!1,title:"",loading:!1,single:!0,tableOptions:{stripe:!1,highlightCurrentRow:!0,multiSelect:!1},tableOperations:[{label:"查看",icon:"el-icon-tickets",handler:function(t){return e.handleCheck(t)}},{label:"住户搬出",icon:"iconfont icon-moveout",style:{color:"#F56C6C"},handler:function(t){return e.moveOut(t)},isShow:function(e){return 0==e.liveStatus}}],commonSearchList:[{prop:"buildingCode",label:"房间编码"},{prop:"userName",label:"住户姓名"},{prop:"certificateCode",label:"证件编号"},{prop:"mobile",label:"住户电话"},{prop:"contactMethod",label:"联系人电话"},{prop:"liveStatus",label:"居住状态",type:"select",options:[]}],column:[{prop:"buildingCode",label:"房屋编码"},{prop:"userName",label:"住户姓名"},{prop:"certificateTypeIdStr",label:"证件类型"},{prop:"liveTypeIdStr",label:"住户类型"},{prop:"certificateCode",label:"证件号码"},{prop:"userSexStr",label:"住户性别"},{prop:"contactMethod",label:"联系人电话"},{prop:"mobile",label:"住户电话"},{prop:"liveStatusStr",label:"居住状态"}],tableData:[],total:0,ids:[],form:{},dicLists:{},params:{page:1,pageSize:20,liveTypeId:2,buildingCode:void 0,userName:void 0,certificateCode:void 0,mobile:void 0,contactMethod:void 0,liveStatus:void 0}}},created:function(){var e=this;this.$request.detailFindEnum().then((function(t){e.dicLists=t.data.data;for(var a=t.data.data,o=[],i=[],r=[],l=0;l<a.liveStatusEnum.length;l++){var n={};n.value=a.liveStatusEnum[l].type,n.label=a.liveStatusEnum[l].value,o.push(n)}for(l=0;l<a.liveTypeEnum.length;l++){var s={};s.value=a.liveTypeEnum[l].type,s.label=a.liveTypeEnum[l].value,i.push(s)}for(l=0;l<a.certificateEnum.length;l++){var p={};p.value=a.certificateEnum[l].type,p.label=a.certificateEnum[l].value,r.push(p)}e.commonSearchList.forEach((function(e){"select"==e.type&&"liveStatus"==e.prop&&(e.options=o),"select"==e.type&&"liveTypeId"==e.prop&&(e.options=i),"select"==e.type&&"certificateTypeId"==e.prop&&(e.options=r)}))})),this.getList()},methods:{submitForm:function(){var e=this;this.$refs.form.validate((function(t){t&&e.$request.tenantMove(e.form).then((function(t){200===t.data.status?(e.msgSuccess("提交成功"),e.open=!1,e.getList(),e.$refs.form.resetFields()):e.$message.error(t.data.msg)}))}))},reset:function(){this.form={moveOutReason:void 0,moveOutTime:void 0,id:void 0}},selectDictLabel:function(e,t){var a=[];return l()(e).map((function(o){if(e[o].value==""+t)return a.push(e[o].label),!1})),a.join("")},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.newsCode})),this.single=1!=e.length},handleQuery:function(){this.params.page=1,this.getList()},resetQuery:function(){var e;this.params=(e={page:1,pageSize:20,liveTypeId:2},i()(e,"page",1),i()(e,"pageSize",20),i()(e,"liveTypeId",2),i()(e,"buildingCode",void 0),i()(e,"userName",void 0),i()(e,"certificateCode",void 0),i()(e,"mobile",void 0),i()(e,"contactMethod",void 0),i()(e,"liveStatus",void 0),e),this.handleQuery()},addList:function(){this.$router.push({path:"/addPeople",name:"addPeople"})},handleUpdate:function(e){this.$router.push({path:"/editPeople",name:"editPeople",params:{code:e.userCode,id:e.id}})},handleCheck:function(e){this.$router.push({path:"/peopleDetail",name:"peopleDetail",params:{code:e.userCode}})},moveOut:function(e){var t=this;this.reset(),this.form.id=e.id,this.$request.tenantInfo(e.id).then((function(e){200===e.data.status?(t.open=!0,t.title="住户搬出",t.dialogDate=e.data.data):t.$message.error(e.data.msg)}))},cancel:function(){this.open=!1,this.reset(),this.$refs.form.resetFields()},getList:function(){var e=this;this.loading=!0,this.$request.detailAll(this.params).then((function(t){200===t.data.status?(e.tableData=t.data.data.rows,e.total=t.data.data.records,e.params.page=t.data.data.page,e.loading=!1):(e.loading=!1,e.$message.error(t.data.msg))}))}}},s=(a("RE4x"),a("KHd+")),p=Object(s.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticStyle:{"padding-right":"20px",background:"#fff"}},[a("CommonSearch",{attrs:{queryParams:e.params,searchList:e.commonSearchList},on:{resetQuery:e.resetQuery,handleQuery:e.handleQuery,"update:queryParams":function(t){e.params=t},"update:query-params":function(t){e.params=t}}})],1),e._v(" "),a("div",{staticClass:"operation"},[a("CommonTable",{attrs:{total:e.total,loading:e.loading,defColumns:e.column,dataList:e.tableData,options:e.tableOptions,page:e.params.page,limit:e.params.pageSize,operations:e.tableOperations},on:{pagination:e.getList,"update:page":function(t){return e.$set(e.params,"page",t)},"update:limit":function(t){return e.$set(e.params,"pageSize",t)},"selection-change":e.handleSelectionChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,"before-close":e.cancel,visible:e.open,width:"700px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"用户姓名:"}},[a("p",[e._v(e._s(e.dialogDate.userName))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"证件号码:",prop:"msgTitle"}},[a("p",[e._v(e._s(e.dialogDate.certificateCode))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别:",prop:"msgTitle"}},[a("p",[e._v(e._s(e.dialogDate.userSexStr))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话:",prop:"msgTitle"}},[a("p",[e._v(e._s(e.dialogDate.mobile))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"租用起始:",prop:"msgTitle"}},[a("p",[e._v(e._s(e.dialogDate.rentBeginTime))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"租用截止:",prop:"msgTitle"}},[a("p",[e._v(e._s(e.dialogDate.rentEndTime))])])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"搬出时间",prop:"moveOutTime"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:e.form.moveOutTime,callback:function(t){e.$set(e.form,"moveOutTime",t)},expression:"form.moveOutTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"搬出原因",prop:"moveOutReason"}},[a("el-input",{attrs:{placeholder:"请输入搬出原因"},model:{value:e.form.moveOutReason,callback:function(t){e.$set(e.form,"moveOutReason",t)},expression:"form.moveOutReason"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)}),[],!1,null,"0774a701",null);t.default=p.exports},GQeE:function(e,t,a){e.exports={default:a("iq4v"),__esModule:!0}},Mqbl:function(e,t,a){var o=a("JB68"),i=a("w6GO");a("zn7N")("keys",(function(){return function(e){return i(o(e))}}))},RE4x:function(e,t,a){"use strict";var o=a("gYQJ");a.n(o).a},gYQJ:function(e,t,a){},iq4v:function(e,t,a){a("Mqbl"),e.exports=a("WEpk").Object.keys},zn7N:function(e,t,a){var o=a("Y7ZC"),i=a("WEpk"),r=a("KUxP");e.exports=function(e,t){var a=(i.Object||{})[e]||Object[e],l={};l[e]=t(a),o(o.S+o.F*r((function(){a(1)})),"Object",l)}}}]);
//# sourceMappingURL=19.77913112bf910a5b83d1.js.map