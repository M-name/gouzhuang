(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{GQeE:function(e,t,a){e.exports={default:a("iq4v"),__esModule:!0}},IkBx:function(e,t,a){},Mqbl:function(e,t,a){var r=a("JB68"),o=a("w6GO");a("zn7N")("keys",(function(){return function(e){return o(r(e))}}))},"W/AE":function(e,t,a){"use strict";a.r(t);var r=a("GQeE"),o=a.n(r),s={name:"userControl",data:function(){var e=this,t=/^([A-Za-z0-9_\-\.\u4e00-\u9fa5])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,8})$/,a=/^[\u4E00-\u9FA5A-Za-z]+$/,r=/^1(3|4|5|6|7|8|9)\d{9}$/;return{props:{value:"areaCode",label:"areaName"},loading:!1,single:!0,tableOptions:{stripe:!1,highlightCurrentRow:!0,multiSelect:!0},tableOperations:[{label:"修改",icon:"el-icon-edit",handler:function(t){return e.handleUpdate(t)}}],commonSearchList:[{prop:"realName",label:"员工姓名"},{prop:"managerCode",label:"员工编号"},{prop:"deptCode",label:"所属部门",type:"select",options:[]},{prop:"postStatus",label:"在岗状态",type:"select",options:[]}],open:!1,title:"",postStatusList:[],deptList:[],roleList:[],areaList:[],userStatusList:[],column:[{prop:"realName",label:"员工姓名"},{prop:"managerCode",label:"员工编号",widht:"180"},{prop:"deptCode",label:"所属部门",widht:"180"},{prop:"postStatus",label:"在岗状态",formatter:function(t,a,r){return e.selectDictLabel(e.postStatusList,t.postStatus)}},{prop:"currAddr",label:"现住址"},{prop:"createTime",label:"创建时间"},{prop:"remark",label:"备注"}],tableData:[],total:0,form:{},rules:{mobile:[{required:!0,message:"手机号不能为空",trigger:"change"},{validator:function(e,t,a){if(null!=t&&""!=t){if(!r.test(t))return a(new Error("请输入正确手机号"));a()}else a()},trigger:"blur"}],managerCode:[{required:!0,message:"员工编号不能为空",trigger:"change"}],realName:[{required:!0,message:"员工姓名不能为空",trigger:"change"},{validator:function(e,t,r){if(null!=t&&""!=t){if(!a.test(t))return r(new Error("请输入正确的姓名"));r()}else r()},trigger:"blur"}],email:[{required:!0,message:"电子邮箱不能为空",trigger:"change"},{validator:function(e,a,r){if(null!=a&&""!=a){if(!t.test(a))return r(new Error("请输入正确邮箱"));r()}else r()},trigger:"blur"}],userSex:[{required:!0,message:"员工性别不能为空",trigger:"change"}],deptCode:[{required:!0,message:"所在部门不能为空",trigger:"change"}],roleCode:[{required:!0,message:"员工角色不能为空",trigger:"change"}],userStatus:[{required:!0,message:"员工状态不能为空",trigger:"change"}],areaCode:[{required:!0,message:"户口所在地不能为空",trigger:"change"}],currAddr:[{required:!0,message:"详细地址不能为空",trigger:"change"}],postStatus:[{required:!0,message:"岗位状态不能为空",trigger:"change"}]},ids:[],params:{page:1,pageSize:20,deptCode:void 0,managerCode:void 0,realName:void 0,postStatus:void 0}}},created:function(){var e=this;this.$request.areaListAll().then((function(t){e.areaList=t.data.data})),this.$request.propertyFindEnum().then((function(t){for(var a=[],r=[],s=[],l=[],i=t.data.data,n=0;n<o()(i.deptMap).length;n++){var u={};u.value=o()(i.deptMap)[n],u.label=i.deptMap[o()(i.deptMap)[n]],r.push(u)}for(n=0;n<o()(i.postStatusMap).length;n++){var p={};p.value=o()(i.postStatusMap)[n],p.label=i.postStatusMap[o()(i.postStatusMap)[n]],p.value=parseFloat(p.value),s.push(p)}for(n=0;n<o()(i.roleMap).length;n++){var d={};d.value=o()(i.roleMap)[n],d.label=i.roleMap[o()(i.roleMap)[n]],a.push(d)}for(n=0;n<o()(i.userStatusMap).length;n++){var c={};c.value=o()(i.userStatusMap)[n],c.label=i.userStatusMap[o()(i.userStatusMap)[n]],c.value=parseFloat(c.value),l.push(c)}e.roleList=a,e.postStatusList=s,e.deptList=r,e.userStatusList=l,e.commonSearchList.forEach((function(e){"select"==e.type&&"postStatus"==e.prop&&(e.options=s),"select"==e.type&&"deptCode"==e.prop&&(e.options=r)}))})),this.getList()},methods:{selectDictLabel:function(e,t){var a=[];return o()(e).map((function(r){if(e[r].value==""+t)return a.push(e[r].label),!1})),a.join("")},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.userCode})),this.single=1!=e.length},handleQuery:function(){this.params.page=1,this.getList()},resetQuery:function(){this.params={page:1,pageSize:20,deptCode:void 0,managerCode:void 0,roleCode:void 0,postStatus:void 0},this.handleQuery()},handleUpdate:function(e){var t=this;this.reset();var a=e.userCode||this.ids[0];this.$request.propertyFindOne(a).then((function(e){200===e.data.status?(e.data.data.areaCode=e.data.data.areaCode.split(","),t.form=e.data.data,t.open=!0,t.title="修改"):t.$message.error(e.data.msg)}))},cancel:function(){this.open=!1,this.reset(),this.$refs.form.resetFields()},submitForm:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.form.areaCode=e.form.areaCode.toString(),e.form.createTime?e.$request.propertyUpdate(e.form).then((function(t){200===t.data.status?(e.msgSuccess("修改成功"),e.open=!1,e.getList(),e.$refs.form.resetFields()):e.$message.error(t.data.msg)})):e.$request.propertyCreate(e.form).then((function(t){200===t.data.status?(e.msgSuccess("新增成功"),e.open=!1,e.getList(),e.$refs.form.resetFields()):e.$message.error(t.data.msg)})))}))},reset:function(){this.form={mobile:void 0,managerCode:void 0,realName:void 0,email:void 0,userSex:1,birthday:void 0,deptCode:void 0,roleCode:void 0,postStatus:void 0,remark:void 0,userStatus:void 0,createBy:JSON.parse(localStorage.getItem("userInfo")).userCode}},addList:function(){this.reset(),this.open=!0,this.title="添加用户"},getList:function(){var e=this;this.loading=!0,this.$request.propertyAll(this.params).then((function(t){200==t.data.status?(e.tableData=t.data.data.rows,e.total=t.data.data.records,e.params.page=t.data.data.page,e.loading=!1):(e.loading=!1,e.$message.error(t.data.msg))})).catch((function(e){console.log(e)}))},handleDelete:function(){var e=this,t=this.ids[0];this.$confirm("是否确认删除该用户?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$request.deptDelDict(t).then((function(){200==res.data.status?(e.getList(),e.msgSuccess("删除成功")):e.$message.error(res.data.msg)}))})).catch((function(){}))}}},l=(a("rnuM"),a("KHd+")),i=Object(l.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticStyle:{"padding-right":"20px",background:"#fff"}},[a("CommonSearch",{attrs:{queryParams:e.params,searchList:e.commonSearchList},on:{resetQuery:e.resetQuery,handleQuery:e.handleQuery,"update:queryParams":function(t){e.params=t},"update:query-params":function(t){e.params=t}}})],1),e._v(" "),a("div",{staticClass:"operation"},[a("div",{staticClass:"button"},[a("el-row",{staticClass:"operations-row",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"mini"},on:{click:e.addList}},[e._v("新增")])],1),e._v(" "),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"success",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1)],1)],1),e._v(" "),a("CommonTable",{attrs:{total:e.total,loading:e.loading,defColumns:e.column,dataList:e.tableData,options:e.tableOptions,page:e.params.page,limit:e.params.pageSize,operations:e.tableOperations},on:{pagination:e.getList,"update:page":function(t){return e.$set(e.params,"page",t)},"update:limit":function(t){return e.$set(e.params,"pageSize",t)},"selection-change":e.handleSelectionChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,"before-close":e.cancel,visible:e.open,width:"700px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机号:",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"员工编号:",prop:"managerCode"}},[a("el-input",{attrs:{placeholder:"请输入员工编号"},model:{value:e.form.managerCode,callback:function(t){e.$set(e.form,"managerCode",t)},expression:"form.managerCode"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"员工姓名:",prop:"realName"}},[a("el-input",{attrs:{placeholder:"请输入员工姓名"},model:{value:e.form.realName,callback:function(t){e.$set(e.form,"realName",t)},expression:"form.realName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电子邮箱:",prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入电子邮箱"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"员工性别:",prop:"userSex"}},[a("el-radio",{attrs:{label:1},model:{value:e.form.userSex,callback:function(t){e.$set(e.form,"userSex",t)},expression:"form.userSex"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:0},model:{value:e.form.userSex,callback:function(t){e.$set(e.form,"userSex",t)},expression:"form.userSex"}},[e._v("女")])],1),e._v(" "),a("el-form-item",{attrs:{label:"所在部门:",prop:"deptCode"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.deptCode,callback:function(t){e.$set(e.form,"deptCode",t)},expression:"form.deptCode"}},e._l(e.deptList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"员工角色：",prop:"roleCode"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.roleCode,callback:function(t){e.$set(e.form,"roleCode",t)},expression:"form.roleCode"}},e._l(e.roleList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"员工状态：",prop:"userStatus"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.userStatus,callback:function(t){e.$set(e.form,"userStatus",t)},expression:"form.userStatus"}},e._l(e.userStatusList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"户口所在地:",prop:"areaCode"}},[a("el-cascader",{attrs:{props:e.props,options:e.areaList},model:{value:e.form.areaCode,callback:function(t){e.$set(e.form,"areaCode",t)},expression:"form.areaCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"详细地址:",prop:"currAddr"}},[a("el-input",{attrs:{placeholder:"请输入详细地址"},model:{value:e.form.currAddr,callback:function(t){e.$set(e.form,"currAddr",t)},expression:"form.currAddr"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"岗位状态:",prop:"postStatus"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.postStatus,callback:function(t){e.$set(e.form,"postStatus",t)},expression:"form.postStatus"}},e._l(e.postStatusList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入备注"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)}),[],!1,null,"96759c4a",null);t.default=i.exports},iq4v:function(e,t,a){a("Mqbl"),e.exports=a("WEpk").Object.keys},rnuM:function(e,t,a){"use strict";var r=a("IkBx");a.n(r).a},zn7N:function(e,t,a){var r=a("Y7ZC"),o=a("WEpk"),s=a("KUxP");e.exports=function(e,t){var a=(o.Object||{})[e]||Object[e],l={};l[e]=t(a),r(r.S+r.F*s((function(){a(1)})),"Object",l)}}}]);
//# sourceMappingURL=33.0631d16e5d07107e6a19.js.map