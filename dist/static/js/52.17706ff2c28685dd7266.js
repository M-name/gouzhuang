(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{Cgco:function(e,a,t){"use strict";t.r(a);var r={name:"filterTable",data:function(){var e=this;return{multiple:!0,loading:!1,commonSearchList:[{prop:"alarmTypeCode",label:"告警类型编码"},{prop:"alarmTypeName",label:"告警类型名称"}],tableOperations:[{label:"修改",icon:"el-icon-edit",handler:function(a){return e.handleUpdate(a)}},{label:"删除",style:{color:"#F56C6C"},icon:"el-icon-delete",handler:function(a){return e.handleDelete(a)}}],tableOptions:{border:!1,stripe:!1,highlightCurrentRow:!0,multiSelect:!0},open:!1,title:"",column:[{prop:"alarmTypeCode",label:"告警类型编码",widht:"180"},{prop:"alarmTypeName",label:"告警类型名称"},{prop:"alarmTypeDesc",label:"告警类型说明"},{prop:"displayOrder",label:"显示顺序"},{prop:"createTime",label:"创建时间"},{prop:"createBy",label:"创建员工"}],ids:[],tableData:[],total:0,form:{},rules:{alarmTypeCode:[{required:!0,message:"告警类型编码不能为空",trigger:"change"}],alarmTypeName:[{required:!0,message:"告警类型名称不能为空",trigger:"change"}],alarmRank:[{required:!0,message:"告警类型级别不能为空",trigger:"change"}]},parentCode:"",parentName:"",params:{alarmTypeName:void 0,alarmTypeCode:void 0,page:1,parentCode:"",pageSize:20}}},mounted:function(){this.$route.params.code?(localStorage.setItem("emergencySecendCode",this.$route.params.code),localStorage.setItem("emergencySecendName",this.$route.params.name),this.params.parentCode=this.$route.params.code,this.parentCode=this.$route.params.code,this.parentName=this.$route.params.name):(this.params.parentCode=localStorage.getItem("emergencySecendCode"),this.parentCode=localStorage.getItem("emergencySecendCode"),this.parentName=localStorage.getItem("emergencySecendName")),this.getList()},methods:{handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!=e.length,this.multiple=!e.length},handleQuery:function(){this.params.page=1,this.getList()},resetQuery:function(){this.params={alarmTypeName:void 0,alarmTypeCode:void 0,parentCode:"",page:1,pageSize:20},this.params.parentCode=this.parentCode,this.handleQuery()},handleUpdate:function(e){var a=this;this.reset();var t=e.alarmTypeCode;this.$request.alarmTypeDictFindOne(t).then((function(e){200==e.data.status?(a.form=e.data.data,a.open=!0,a.title="修改告警类型"):a.$message.error(e.data.msg)}))},cancel:function(){this.open=!1,this.reset(),this.$refs.form.resetFields()},submitForm:function(){var e=this;this.$refs.form.validate((function(a){a&&(e.form.createTime?e.$request.alarmTypeDictUpdate(e.form).then((function(a){200===a.data.status?(e.msgSuccess("修改成功"),e.open=!1,e.getList(),e.$refs.form.resetFields()):e.$message.error(a.data.msg)})):e.$request.alarmTypeDictAddDict(e.form).then((function(a){200===a.data.status?(e.msgSuccess("新增成功"),e.open=!1,e.getList(),e.$refs.form.resetFields()):e.$message.error(a.data.msg)})))}))},reset:function(){this.form={alarmTypeCode:"",alarmTypeName:"",alarmRank:1,alarmTypeDesc:"",displayOrder:0,parentCode:this.parentCode}},addList:function(){this.reset(),this.open=!0,this.title="新增告警类型"},getList:function(){var e=this;this.loading=!0,this.$request.alarmTypeDictFindQuery(this.params).then((function(a){200==a.data.status?(e.tableData=a.data.data.rows,e.total=a.data.data.records,e.params.page=a.data.data.page,e.loading=!1):(e.$message.error(a.data.msg),e.loading=!1)}))},handleDelete:function(e){var a=this,t=[];e&&t.push(e.id);var r=t.length>0?t:this.ids;this.$confirm("是否确认删除该区域?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$request.alarmTypeDictDelete(r).then((function(e){200==e.data.status?(a.getList(),a.msgSuccess("删除成功")):a.$message.error(e.data.msg)}))})).catch((function(){}))}}},o=(t("kDWJ"),t("KHd+")),s=Object(o.a)(r,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"contant"},[t("div",{staticStyle:{"padding-right":"20px",background:"#fff"}},[t("CommonSearch",{attrs:{queryParams:e.params,searchList:e.commonSearchList},on:{resetQuery:e.resetQuery,handleQuery:e.handleQuery,"update:queryParams":function(a){e.params=a},"update:query-params":function(a){e.params=a}}})],1),e._v(" "),t("div",{staticClass:"operation"},[t("div",{staticClass:"button"},[t("el-row",{staticClass:"operations-row",attrs:{gutter:10}},[t("el-col",{attrs:{span:1.5}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"mini"},on:{click:e.addList}},[e._v("新增")])],1),e._v(" "),t("el-col",{attrs:{span:1.5}},[t("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger",disabled:e.multiple},on:{click:function(a){return e.handleDelete()}}},[e._v("删除")])],1),e._v(" "),t("span",{staticStyle:{"margin-left":"10px"}},[e._v("上级告警类型："),t("span",{staticStyle:{color:"#409EFF"}},[e._v(e._s(this.parentName))])])],1)],1),e._v(" "),t("CommonTable",{attrs:{total:e.total,loading:e.loading,defColumns:e.column,dataList:e.tableData,options:e.tableOptions,page:e.params.page,limit:e.params.pageSize,operations:e.tableOperations},on:{pagination:e.getList,"update:page":function(a){return e.$set(e.params,"page",a)},"update:limit":function(a){return e.$set(e.params,"pageSize",a)},"selection-change":e.handleSelectionChange}})],1),e._v(" "),t("el-dialog",{attrs:{title:e.title,"before-close":e.cancel,visible:e.open,width:"600px","append-to-body":""},on:{"update:visible":function(a){e.open=a}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"140px"}},[t("el-form-item",{attrs:{label:"告警类型编码：",prop:"alarmTypeCode"}},[t("el-input",{attrs:{placeholder:"请输入告警类型编码"},model:{value:e.form.alarmTypeCode,callback:function(a){e.$set(e.form,"alarmTypeCode",a)},expression:"form.alarmTypeCode"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"告警类型名称：",prop:"alarmTypeName"}},[t("el-input",{attrs:{placeholder:"请输入告警类型名称"},model:{value:e.form.alarmTypeName,callback:function(a){e.$set(e.form,"alarmTypeName",a)},expression:"form.alarmTypeName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"告警类型级别：",prop:"alarmRank"}},[t("el-input-number",{attrs:{"controls-position":"right",min:1,max:100},model:{value:e.form.alarmRank,callback:function(a){e.$set(e.form,"alarmRank",a)},expression:"form.alarmRank"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"显示顺序：",prop:"displayOrder"}},[t("el-input-number",{attrs:{"controls-position":"right",min:1,max:100},model:{value:e.form.displayOrder,callback:function(a){e.$set(e.form,"displayOrder",a)},expression:"form.displayOrder"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"告警类型描述：",prop:"alarmTypeDesc"}},[t("el-input",{attrs:{placeholder:"请输入告警类型描述"},model:{value:e.form.alarmTypeDesc,callback:function(a){e.$set(e.form,"alarmTypeDesc",a)},expression:"form.alarmTypeDesc"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)}),[],!1,null,"5b0ae8a2",null);a.default=s.exports},kDWJ:function(e,a,t){"use strict";var r=t("vXdY");t.n(r).a},vXdY:function(e,a,t){}}]);
//# sourceMappingURL=52.17706ff2c28685dd7266.js.map