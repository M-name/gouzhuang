(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{BxyD:function(e,t,a){"use strict";a.r(t);var r={name:"filterTable",data:function(){var e=this;return{multiple:!0,loading:!1,commonSearchList:[{prop:"menuName",label:"菜单名称"}],tableOperations:[{label:"修改",icon:"el-icon-edit",handler:function(t){return e.handleUpdate(t)}},{label:"删除",style:{color:"#F56C6C"},icon:"el-icon-delete",handler:function(t){return e.handleDelete(t)}}],tableOptions:{border:!1,stripe:!1,highlightCurrentRow:!0,multiSelect:!0},open:!1,title:"",column:[{prop:"menuCode",label:"菜单编码",widht:"180"},{prop:"menuName",label:"菜单名称"},{prop:"iconName",label:"菜单图标"},{prop:"menuRoute",label:"菜单路由"},{prop:"displayOrder",label:"显示顺序"},{prop:"createTime",label:"创建时间"},{prop:"createBy",label:"创建员工"}],ids:[],tableData:[],total:0,form:{},rules:{menuCode:[{required:!0,message:"菜单编码不能为空",trigger:"blur"}],menuName:[{required:!0,message:"菜单名称不能为空",trigger:"blur"}],menuRoute:[{required:!0,message:"菜单路由不能为空",trigger:"blur"}]},parentCode:"",parentName:"",params:{menuType:1,menuName:void 0,page:1,parentCode:"",pageSize:20}}},mounted:function(){this.$route.params.code?(localStorage.setItem("menuwxCode",this.$route.params.code),localStorage.setItem("menuwxName",this.$route.params.name),this.params.parentCode=this.$route.params.code,this.parentCode=this.$route.params.code,this.parentName=this.$route.params.name):(this.params.parentCode=localStorage.getItem("menuwxCode"),this.parentCode=localStorage.getItem("menuwxCode"),this.parentName=localStorage.getItem("menuwxName")),this.getList()},methods:{handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!=e.length,this.multiple=!e.length},handleQuery:function(){this.params.page=1,this.getList()},resetQuery:function(){this.params={menuName:void 0,parentCode:"",menuType:1,page:1,pageSize:20},this.params.parentCode=this.parentCode,this.handleQuery()},handleUpdate:function(e){var t=this;this.reset(),this.$request.roleFindMenu(e.id).then((function(e){t.form=e.data.data,t.open=!0,t.title="修改菜单"}))},cancel:function(){this.open=!1,this.reset(),this.$refs.form.resetFields()},submitForm:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.form.createTime?e.$request.roleMenuUpdate(e.form).then((function(t){200===t.data.status?(e.msgSuccess("修改成功"),e.open=!1,e.getList(),e.$refs.form.resetFields()):e.$message.error(t.data.msg)})):e.$request.roleMenuCreate(e.form).then((function(t){200===t.data.status?(e.msgSuccess("新增成功"),e.open=!1,e.getList(),e.$refs.form.resetFields()):e.$message.error(t.data.msg)})))}))},reset:function(){this.form={menuCode:void 0,menuName:void 0,iconName:void 0,menuRoute:void 0,displayOrder:0,menuType:1,parentCode:this.parentCode}},addList:function(){this.reset(),this.open=!0,this.title="新增菜单"},getList:function(){var e=this;this.loading=!0,this.$request.roleMenuList(this.params).then((function(t){200==t.data.status?(e.tableData=t.data.data.rows,e.total=t.data.data.records,e.params.page=t.data.data.page,e.loading=!1):(e.$message.error(t.data.msg),e.loading=!1)}))},handleDelete:function(e){var t=this,a=[];e&&a.push(e.id);var r=a.length>0?a:this.ids;this.$confirm("是否确认删除选中的菜单?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$request.roleDelMenu(r).then((function(){t.getList(),t.msgSuccess("删除成功")}))})).catch((function(){}))}}},o=(a("lHP7"),a("KHd+")),n=Object(o.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contant"},[a("div",{staticStyle:{"padding-right":"20px",background:"#fff"}},[a("CommonSearch",{attrs:{queryParams:e.params,searchList:e.commonSearchList},on:{resetQuery:e.resetQuery,handleQuery:e.handleQuery,"update:queryParams":function(t){e.params=t},"update:query-params":function(t){e.params=t}}})],1),e._v(" "),a("div",{staticClass:"operation"},[a("div",{staticClass:"button"},[a("el-row",{staticClass:"operations-row",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"mini"},on:{click:e.addList}},[e._v("新增")])],1),e._v(" "),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger",disabled:e.multiple},on:{click:function(t){return e.handleDelete()}}},[e._v("删除")])],1),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("上级菜单："),a("span",{staticStyle:{color:"#409eff"}},[e._v(e._s(this.parentName))])])],1)],1),e._v(" "),a("CommonTable",{attrs:{total:e.total,loading:e.loading,defColumns:e.column,dataList:e.tableData,options:e.tableOptions,page:e.params.page,limit:e.params.pageSize,operations:e.tableOperations},on:{pagination:e.getList,"update:page":function(t){return e.$set(e.params,"page",t)},"update:limit":function(t){return e.$set(e.params,"pageSize",t)},"selection-change":e.handleSelectionChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,"before-close":e.cancel,visible:e.open,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"父级菜单："}},[a("el-input",{attrs:{disabled:"",placeholder:"请输入菜单编码"},model:{value:e.parentName,callback:function(t){e.parentName=t},expression:"parentName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单编码：",prop:"menuCode"}},[a("el-input",{attrs:{placeholder:"请输入菜单编码"},model:{value:e.form.menuCode,callback:function(t){e.$set(e.form,"menuCode",t)},expression:"form.menuCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单名称：",prop:"menuName"}},[a("el-input",{attrs:{placeholder:"请输入菜单名称"},model:{value:e.form.menuName,callback:function(t){e.$set(e.form,"menuName",t)},expression:"form.menuName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单图标：",prop:"iconName"}},[a("el-input",{attrs:{placeholder:"请输入菜单图标名称"},model:{value:e.form.iconName,callback:function(t){e.$set(e.form,"iconName",t)},expression:"form.iconName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单路由：",prop:"menuRoute"}},[a("el-input",{attrs:{placeholder:"请输入菜单路由"},model:{value:e.form.menuRoute,callback:function(t){e.$set(e.form,"menuRoute",t)},expression:"form.menuRoute"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"显示顺序：",prop:"displayOrder"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:100},model:{value:e.form.displayOrder,callback:function(t){e.$set(e.form,"displayOrder",t)},expression:"form.displayOrder"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)}),[],!1,null,"7f8dbab4",null);t.default=n.exports},VVMH:function(e,t,a){},lHP7:function(e,t,a){"use strict";var r=a("VVMH");a.n(r).a}}]);
//# sourceMappingURL=78.0bf21a4bb3cd5fb07320.js.map