(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{"/YAr":function(e,a,t){},EWxb:function(e,a,t){"use strict";t.r(a);var i=t("cLjf"),n=t.n(i),r=t("hDQ3"),o=t.n(r),s=t("DdJ+"),l=t("FCe7"),u=t("6ZY3"),c=t.n(u),d={name:"carFiles",props:{dialogInform:{type:Object,default:{}}},data:function(){return{dialogVisible:!1,form:{},userInform:JSON.parse(localStorage.getItem("userInfo"))}},methods:{dialogCloses:function(){this.dialogVisible=!1},dialogClose:function(){this.dialogVisible=!1,this.$emit("close",!1)},areaClose:function(){this.dialogVisible=!1,this.$emit("closeArea",!1)},commit:function(){var e=this,a=this;this.$refs.forms.validate((function(t){t&&("新增车位区域"==e.dialogInform.title&&e.$request.parkingAreaAdd(c()(e.form)).then((function(t){200==t.data.status?(e.$message({message:"提交成功",type:"success"}),a.areaClose()):e.$message.error("提交失败")})).catch((function(a){e.$message.error("提交失败")})),"修改车位区域"==e.dialogInform.title&&e.$request.parkingAreaUpdate(c()(e.dialogInform.updateInform,e.form)).then((function(t){200==t.data.status?(e.$message({message:"提交成功",type:"success"}),a.areaClose()):e.$message.error("提交失败")})).catch((function(a){e.$message.error("提交失败")})),"新增车位"==e.dialogInform.title&&e.$request.parkingAdd(e.form).then((function(t){console.log(t),200==t.data.status?(e.$message({message:"提交成功",type:"success"}),a.dialogClose()):e.$message.error("提交失败")})).catch((function(a){e.$message.error("提交失败")})),"修改车位"==e.dialogInform.title&&e.$request.parkingInfoUpdate(c()(e.dialogInform.updateInform,e.form)).then((function(t){console.log(t),200==t.data.status?(e.$message({message:"修改成功",type:"success"}),a.dialogClose()):e.$message.error("修改失败")})).catch((function(a){e.$message.error("修改失败")})))}))}},watch:{dialogShow:function(){this.dialogVisible=this.dialogShow},dialogInform:function(){this.form=this.dialogInform.list.reduce((function(e,a){return a.data?e[a.value]=a.data:e[a.value]="",e}),{})}}},g=(t("PaFO"),t("SsL+")),p=Object(g.a)(d,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-dialog",{attrs:{title:e.dialogInform.title,visible:e.dialogVisible,"before-close":e.dialogCloses,width:"800px"},on:{"update:visible":function(a){e.dialogVisible=a}}},[t("el-form",{ref:"forms",attrs:{model:e.form,"label-width":"120px",rules:e.dialogInform.rules}},e._l(e.dialogInform.list,(function(a,i){return t("el-form-item",{key:i,staticClass:"item",attrs:{label:a.lable,prop:a.value}},["input"==a.type?t("el-input",{attrs:{placeholder:a.placeholder},model:{value:e.form[a.value],callback:function(t){e.$set(e.form,a.value,t)},expression:"form[item.value]"}}):e._e(),e._v(" "),"select"==a.type?t("el-select",{model:{value:e.form[a.value],callback:function(t){e.$set(e.form,a.value,t)},expression:"form[item.value]"}},e._l(a.children,(function(e){return t("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1):e._e(),e._v(" "),"radio"==a.type?t("div",{staticStyle:{width:"480px"}},e._l(a.children,(function(i,n){return t("el-radio",{key:n,attrs:{label:i.label},model:{value:e.form[a.value],callback:function(t){e.$set(e.form,a.value,t)},expression:"form[item.value]"}},[e._v(e._s(i.value))])})),1):e._e()],1)})),1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:e.dialogCloses}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.commit}},[e._v("保 存")])],1)],1)}),[],!1,null,"ec6829cc",null).exports,m={components:{CommonTable:s.a,search:l.a,commonDialog:p},name:"carFiles",data:function(){var e=this;return{params:{page:1,pageSize:20,parkingCode:void 0,parkingStatus:void 0,zoneCode:void 0},commonSearchList:[{prop:"parkingCode",label:"请输入车位编号"},{prop:"parkingStatus",label:"选择车位状态",type:"select",options:[]}],areaClick:{id:void 0,choose:!1,info:{}},loading:!1,total:0,tableOptions:{stripe:!1,highlightCurrentRow:!0,multiSelect:!1},tableOperations:[{label:"修改",icon:"el-icon-edit",handler:function(a){return e.updateParkingArea(a,0)}},{label:"删除",style:{color:"#F56C6C"},icon:"el-icon-delete",handler:function(a){return e.handleDelete(a)}}],column:[{prop:"zoneName",label:"车位区域"},{prop:"parkingCode",label:"车位编号",widht:"180"},{prop:"parkingStatusStr",label:"车位状态",widht:"180"},{prop:"remark",label:"车位备注"}],tableData:[],dicList:[],dialogSetting:{},parkingArea:[]}},mounted:function(){var e=this;this.$request.parkingFindEnum().then((function(a){e.dicList=a.data.data,e.commonSearchList.forEach((function(a){"select"==a.type&&"parkingStatus"==a.prop&&e.dicList.parkingStatusEnum.map((function(e){a.options.push({label:e.value,value:e.type})}))}))})),this.getParkingArea(),this.getList()},methods:{areaChoose:function(e){this.areaClick.id=e.id,this.areaClick.choose=!0,this.areaClick.info=e,this.params.zoneCode=e.zoneCode,this.params.page=1,this.getList()},getParkingArea:function(){var e=this;this.$request.parkingAreaSelect().then((function(a){200===a.data.status?e.parkingArea=a.data.data:e.$message.error(a.data.msg)}))},handleDelete:function(e){var a=this,t=e.id;this.$confirm("是否确认删除该记录?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$request.parkingDel(t).then((function(){200===res.data.status?(a.getList(),a.msgSuccess("删除成功")):a.$message.error(res.data.msg)}))})).catch((function(){}))},deleteParkingArea:function(e){var a=this;this.$confirm("此操作将永久删除此车位区域, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(o()(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.$request.parkingAreaDelete(e.id);case 2:200==t.sent.data.status?(a.$message({type:"success",message:"删除成功!"}),a.getParkingArea()):a.$message({type:"info",message:"删除失败"});case 4:case"end":return t.stop()}}),t,a)})))).catch((function(e){console.log(e),a.$message({type:"info",message:"已取消删除"})})),console.log(e)},updateParkingArea:function(e,a){var t=this;if(1==a)this.$request.getParkingArea(e.id).then((function(e){t.$refs.dialog.dialogVisible=!0,t.dialogSetting={title:"修改车位区域",list:[{lable:"车位区域名称",type:"input",placeholder:"请输入车位区域名称",value:"zoneName",data:e.data.data.zoneName?e.data.data.zoneName:""},{lable:"车位区域编码",type:"input",placeholder:"请输入车位区域编码",value:"zoneCode",data:e.data.data.zoneCode?e.data.data.zoneCode:""},{lable:"车位数量",type:"input",placeholder:"请输入车位数量",value:"parkingNum",data:e.data.data.parkingNum?e.data.data.parkingNum:""},{lable:"区域备注",type:"input",placeholder:"请输入车辆备注",value:"remark",data:e.data.data.remark?e.data.data.remark:""}],rules:{zoneName:[{required:!0,message:"车位区域名称不能为空",trigger:"change"}],zoneCode:[{required:!0,message:"车位区域编码不能为空",trigger:"change"}],parkingNum:[{required:!0,message:"车位数量不能为空",trigger:"change"}]},updateInform:e.data.data}}));else{var i=[],n=[];this.dicList.parkingStatusEnum.map((function(e){n.push({label:e.type,value:e.value})})),this.parkingArea.map((function(e){i.push({label:e.zoneName,value:e.zoneCode})})),this.$request.parkingInfoFind(e.id).then((function(e){t.$refs.dialog.dialogVisible=!0,console.log(e),t.dialogSetting={title:"修改车位",list:[{lable:"车位区域",type:"select",placeholde:"请选择车位区域",children:i,value:"zoneCode",data:e.data.data.zoneCode?e.data.data.zoneCode:""},{lable:"车位编码",type:"input",placeholder:"请输入车位编号",value:"parkingCode",data:e.data.data.parkingCode?e.data.data.parkingCode:""},{lable:"车位状态",type:"radio",children:n,value:"parkingStatus",data:e.data.data.parkingStatus?e.data.data.parkingStatus:""},{lable:"车位备注",type:"input",placeholder:"请输入车辆备注",value:"remark",data:e.data.data.remark?e.data.data.remark:""}],rules:{zoneCode:[{required:!0,message:"车位区域未选择",trigger:"change"}],parkingCode:[{required:!0,message:"车位编码不能为空",trigger:"change"}],parkingStatus:[{required:!0,message:"车位状态未选择",trigger:"change"}]},updateInform:e.data.data}}))}},handleQuery:function(){this.params.page=1,this.getList()},resetQuery:function(){this.params={page:1,pageSize:20,parkingCode:void 0,parkingStatus:void 0,zoneCode:void 0},this.areaClick={id:void 0,choose:!1,info:{}},this.handleQuery()},getList:function(){var e=this;this.loading=!0,this.$request.parkingSelect(this.params).then((function(a){200===a.data.status?(e.tableData=a.data.data.rows,e.total=a.data.data.records,e.params.page=a.data.data.page,e.loading=!1):(e.loading=!1,e.$message.error(a.data.msg))}))},handleSelectionChange:function(e){console.log(e),e.map((function(e){}))},dialogOpen:function(e){var a=this;if(this.$refs.dialog.dialogVisible=!0,this.$nextTick((function(){a.$refs.dialog.$refs.forms.resetFields(),a.$refs.dialog.$refs.forms.form={}})),e){var t=[];this.dicList.parkingStatusEnum.map((function(e){t.push({label:e.type,value:e.value})}));var i=[];this.parkingArea.map((function(e){i.push({label:e.zoneName,value:e.zoneCode})})),this.dialogSetting={title:"新增车位",list:[{lable:"车位区域",type:"select",placeholde:"请选择车位区域",children:i,value:"zoneCode"},{lable:"车位编码",type:"input",placeholder:"请输入车位编号",value:"parkingCode"},{lable:"车位状态",type:"radio",children:t,value:"parkingStatus"},{lable:"车位备注",type:"input",placeholder:"请输入车辆备注",value:"remark"}],rules:{zoneCode:[{required:!0,message:"车位区域未选择",trigger:"change"}],parkingCode:[{required:!0,message:"车位编码不能为空",trigger:"change"}],parkingStatus:[{required:!0,message:"车位状态未选择",trigger:"change"}]}}}else this.dialogSetting={title:"新增车位区域",list:[{lable:"车位区域名称",type:"input",placeholder:"请输入车位区域名称",value:"zoneName"},{lable:"车位区域编码",type:"input",placeholder:"请输入车位区域编码",value:"zoneCode"},{lable:"车位数量",type:"input",placeholder:"请输入车位数量",value:"parkingNum"},{lable:"区域备注",type:"input",placeholder:"请输入车辆备注",value:"remark"}],rules:{zoneName:[{required:!0,message:"车位区域名称不能为空",trigger:"change"}],zoneCode:[{required:!0,message:"车位区域编码不能为空",trigger:"change"}],parkingNum:[{required:!0,message:"车位数量不能为空",trigger:"change"}]}}},closeDialog:function(){this.getList()},closeArea:function(){this.getParkingArea()}}},f=(t("VBqR"),Object(g.a)(m,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"pagebox"},[t("aside",[t("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(a){return e.dialogOpen(!1)}}},[e._v("新增车位区域")]),e._v(" "),t("ul",e._l(e.parkingArea,(function(a,i){return t("li",{key:i,class:e.areaClick.id==a.id&&1==e.areaClick.choose?"choose":"",staticStyle:{cursor:"pointer"}},[t("span",{on:{click:function(t){return e.areaChoose(a)}}},[e._v(e._s(a.zoneName))]),e._v(" "),t("div",[t("span",{staticClass:"blue-text",on:{click:function(t){return e.updateParkingArea(a,1)}}},[e._v("修改")]),e._v(" "),t("span",{on:{click:function(t){return e.deleteParkingArea(a)}}},[e._v("删除")])])])})),0)],1),e._v(" "),t("article",[t("div",{staticClass:"search-box"},[t("CommonSearch",{attrs:{queryParams:e.params,searchList:e.commonSearchList},on:{resetQuery:e.resetQuery,handleQuery:e.handleQuery,"update:queryParams":function(a){e.params=a},"update:query-params":function(a){e.params=a}}}),e._v(" "),t("el-button",{attrs:{icon:"el-icon-plus",size:"small"},on:{click:function(a){return e.dialogOpen(!0)}}},[e._v("新增车位")])],1),e._v(" "),e.areaClick.info.zoneName?t("div",{staticClass:"search-title"},[t("div",{staticClass:"span-group"},[t("span",[e._v("已选中")]),e._v(" "),t("span",[e._v(e._s(e.areaClick.info.zoneName?e.areaClick.info.zoneName:""))])])]):e._e(),e._v(" "),t("CommonTable",{attrs:{total:e.total,loading:e.loading,defColumns:e.column,dataList:e.tableData,options:e.tableOptions,page:e.params.page,limit:e.params.pageSize,operations:e.tableOperations},on:{pagination:e.getList,"update:page":function(a){return e.$set(e.params,"page",a)},"update:limit":function(a){return e.$set(e.params,"pageSize",a)},"selection-change":e.handleSelectionChange}})],1),e._v(" "),t("commonDialog",{ref:"dialog",attrs:{dialogInform:e.dialogSetting},on:{close:e.closeDialog,closeArea:e.closeArea}})],1)}),[],!1,null,"a37e0bf2",null));a.default=f.exports},PaFO:function(e,a,t){"use strict";t("pgB/")},VBqR:function(e,a,t){"use strict";t("/YAr")},"pgB/":function(e,a,t){}}]);
//# sourceMappingURL=38.4be6243f87a9dcae27f2.js.map