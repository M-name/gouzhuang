(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"5hZq":function(t,e,a){},DwvG:function(t,e,a){"use strict";a.r(e);var n=a("GQeE"),i=a.n(n),s={name:"userControl",data:function(){var t=this;return{loading:!1,single:!0,multiple:!0,publishStatusMap:[],tableOptions:{stripe:!1,highlightCurrentRow:!0,multiSelect:!0},tableOperations:[{label:"修改",icon:"el-icon-edit",handler:function(e){return t.handleUpdate(e)},isShow:function(t){return 2!=t.publishStatus}},{label:"下线",icon:"iconfont icon-offline",handler:function(e){return t.offline(e)},isShow:function(t){return 2==t.publishStatus}},{label:"删除",style:{color:"#F56C6C"},icon:"el-icon-delete",handler:function(e){return t.handleDelete(e)}}],commonSearchList:[{prop:"newsTitle",label:"便民活动标题"},{prop:"publishStatus",label:"发布状态",type:"select",options:[]}],column:[{prop:"newsTitle",label:"便民活动标题"},{prop:"publishStatus",label:"发布状态",widht:"180",formatter:function(e,a,n){return t.selectDictLabel(t.publishStatusMap,e.publishStatus)}},{prop:"createBy",label:"创建人",widht:"180"},{prop:"publishTime",label:"发布时间"},{prop:"createTime",label:"创建时间"}],tableData:[],total:0,ids:[],form:{},params:{page:1,pageSize:20,newsType:3,newsTitle:void 0,publishStatus:void 0}}},created:function(){var t=this;this.$request.findAlleuemsNews().then((function(e){for(var a=[],n=e.data.data,s=0;s<i()(n.publishStatusMap).length;s++){var o={};o.value=i()(n.publishStatusMap)[s],o.label=n.publishStatusMap[i()(n.publishStatusMap)[s]],a.push(o)}t.publishStatusMap=a,t.commonSearchList.forEach((function(t){"select"==t.type&&"publishStatus"==t.prop&&(t.options=a)}))})),this.getList()},methods:{selectDictLabel:function(t,e){var a=[];return i()(t).map((function(n){if(t[n].value==""+e)return a.push(t[n].label),!1})),a.join("")},handleSelectionChange:function(t){this.ids=t.map((function(t){return t.newsCode})),this.single=1!=t.length,this.multiple=!t.length},handleQuery:function(){this.params.page=1,this.getList()},resetQuery:function(){this.params={page:1,pageSize:20,newsType:3,newsTitle:void 0,publishStatus:void 0},this.handleQuery()},addList:function(){this.$router.push({path:"/detailgar",name:"addNew",params:{code:"3"}})},handleUpdate:function(t){this.$router.push({path:"/detailgars",name:"editNew",params:{code:1,id:t.id}})},getList:function(){var t=this;this.loading=!0,this.$request.findByPageNews(this.params).then((function(e){200==e.data.status?(t.tableData=e.data.data.rows,t.total=e.data.data.records,t.params.page=e.data.data.page,t.loading=!1):(t.loading=!1,t.$message.error(e.data.msg))}))},handleDelete:function(t){var e=this,a=[];t&&a.push(t.id);var n=a.length>0?a:this.ids;this.$confirm("是否确认删除该记录?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$request.deleteNews(n).then((function(){200==res.data.status?(e.getList(),e.msgSuccess("删除成功")):e.$message.error(res.data.msg)}))})).catch((function(){}))},offline:function(t){var e=this,a=t.id;e.$request.findByIdNews(a).then((function(t){e.form=t.data.data,e.form.userCode=JSON.parse(localStorage.getItem("userInfo")).userCode})),this.$confirm("是否确认下线该记录?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$request.offLineUpdate(e.form).then((function(){e.getList(),e.msgSuccess("下线成功")}))})).catch((function(){}))}}},o=(a("v4nV"),a("KHd+")),r=Object(o.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticStyle:{"padding-right":"20px",background:"#fff"}},[a("CommonSearch",{attrs:{queryParams:t.params,searchList:t.commonSearchList},on:{resetQuery:t.resetQuery,handleQuery:t.handleQuery,"update:queryParams":function(e){t.params=e},"update:query-params":function(e){t.params=e}}})],1),t._v(" "),a("div",{staticClass:"operation"},[a("div",{staticClass:"button"},[a("el-row",{staticClass:"operations-row",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"mini"},on:{click:t.addList}},[t._v("新增")])],1),t._v(" "),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:t.multiple},on:{click:t.handleDelete}},[t._v("删除")])],1)],1)],1),t._v(" "),a("CommonTable",{attrs:{total:t.total,loading:t.loading,defColumns:t.column,dataList:t.tableData,options:t.tableOptions,page:t.params.page,limit:t.params.pageSize,operations:t.tableOperations},on:{pagination:t.getList,"update:page":function(e){return t.$set(t.params,"page",e)},"update:limit":function(e){return t.$set(t.params,"pageSize",e)},"selection-change":t.handleSelectionChange}})],1)])}),[],!1,null,"f76a5162",null);e.default=r.exports},GQeE:function(t,e,a){t.exports={default:a("iq4v"),__esModule:!0}},Mqbl:function(t,e,a){var n=a("JB68"),i=a("w6GO");a("zn7N")("keys",(function(){return function(t){return i(n(t))}}))},iq4v:function(t,e,a){a("Mqbl"),t.exports=a("WEpk").Object.keys},v4nV:function(t,e,a){"use strict";var n=a("5hZq");a.n(n).a},zn7N:function(t,e,a){var n=a("Y7ZC"),i=a("WEpk"),s=a("KUxP");t.exports=function(t,e){var a=(i.Object||{})[t]||Object[t],o={};o[t]=e(a),n(n.S+n.F*s((function(){a(1)})),"Object",o)}}}]);
//# sourceMappingURL=11.8ff9d6d33a13a14e6ea8.js.map