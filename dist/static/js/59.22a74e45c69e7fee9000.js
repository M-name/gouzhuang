(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{WooZ:function(e,t,a){"use strict";a.r(t);var s={name:"userControl",data:function(){var e=this;return{parentType:"",loading:!1,single:!0,tableOptions:{stripe:!1,highlightCurrentRow:!0,multiSelect:!1},tableOperations:[{label:"修改",icon:"el-icon-edit",handler:function(t){return e.handleUpdate(t)}},{label:"删除",style:{color:"#F56C6C"},icon:"el-icon-delete",handler:function(t){return e.handleDelete(t)}}],commonSearchList:[{prop:"msgTypeCode",label:"子消息类型编码"},{prop:"msgTypeName",label:"子消息类型名称"}],open:!1,title:"",column:[{prop:"msgTypeCode",label:"子消息类型编码"},{prop:"msgTypeName",label:"子消息类型名称"},{prop:"msgTypeDesc",label:"子消息类型描述"},{prop:"displayOrder",label:"显示顺序"},{prop:"createTime",label:"创建时间"},{prop:"createBy",label:"创建员工"}],tableData:[],total:0,form:{},rules:{msgTypeName:[{required:!0,message:"子消息类型名称不能为空",trigger:"change"}],msgTypeCode:[{required:!0,message:"子消息类型编码不能为空",trigger:"change"}]},ids:[],parentId:void 0,params:{page:1,pageSize:20,msgTypeCode:void 0,msgTypeName:void 0,parentCode:""}}},mounted:function(){this.$route.params.code?(localStorage.setItem("messageParentCode",this.$route.params.code),localStorage.setItem("messageParentType",this.$route.params.type),this.parentId=this.$route.params.code,this.params.parentCode=this.$route.params.code,this.parentType=this.$route.params.type):(this.parentId=localStorage.getItem("messageParentCode"),this.params.parentCode=localStorage.getItem("messageParentCode"),this.parentType=localStorage.getItem("messageParentType")),this.getList()},methods:{handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!=e.length},handleQuery:function(){this.params.page=1,this.getList()},resetQuery:function(){this.params={page:1,pageSize:20,msgTypeCode:void 0,msgTypeName:void 0,parentCode:this.parentId},this.handleQuery()},handleUpdate:function(e){var t=this;this.reset();var a=e.id;this.$request.msgDictFindDict(a).then((function(e){200===e.data.status?(t.form=e.data.data,t.open=!0,t.title="修改字典"):t.$message.error(e.data.msg)}))},cancel:function(){this.open=!1,this.reset(),this.$refs.form.resetFields()},submitForm:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.form.createTime?e.$request.msgDictUpdateDict(e.form).then((function(t){200===t.data.status?(e.msgSuccess("修改成功"),e.open=!1,e.getList(),e.$refs.form.resetFields()):e.$message.error(t.data.msg)})):e.$request.msgDictCreateSecond(e.form).then((function(t){200===t.data.status?(e.msgSuccess("新增成功"),e.open=!1,e.getList(),e.$refs.form.resetFields()):e.$message.error(t.data.msg)})))}))},reset:function(){this.form={msgTypeCode:"",msgTypeDesc:"",msgTypeName:"",parentCode:this.params.parentCode,displayOrder:0}},addList:function(){this.reset(),this.open=!0,this.title="添加字典"},getList:function(){var e=this;this.loading=!0,this.$request.msgDictAllSecond(this.params).then((function(t){200===t.data.status?(e.tableData=t.data.data.rows,e.total=t.data.data.records,e.params.page=t.data.data.page,e.loading=!1):(e.loading=!1,e.$message.error(t.data.msg))}))},handleDelete:function(e){var t=this;this.$confirm("是否确认删除该字典?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$request.msgDictDelSecond(e.id).then((function(){200===res.data.status?(t.getList(),t.msgSuccess("删除成功")):t.$message.error(res.data.msg)}))})).catch((function(){}))}}},r=(a("cqxB"),a("SsL+")),o=Object(r.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticStyle:{"padding-right":"20px",background:"#fff"}},[a("CommonSearch",{attrs:{queryParams:e.params,searchList:e.commonSearchList},on:{resetQuery:e.resetQuery,handleQuery:e.handleQuery,"update:queryParams":function(t){e.params=t},"update:query-params":function(t){e.params=t}}})],1),e._v(" "),a("div",{staticClass:"operation"},[a("div",{staticClass:"button"},[a("el-row",{staticClass:"operations-row",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"mini"},on:{click:e.addList}},[e._v("新增子消息类型")])],1),e._v(" "),a("el-col",{attrs:{span:1.5}},[a("p",{staticClass:"parent-type"},[e._v("\n            上级消息类型："),a("span",[e._v(e._s(e.parentType))])])])],1)],1),e._v(" "),a("CommonTable",{attrs:{total:e.total,loading:e.loading,defColumns:e.column,dataList:e.tableData,options:e.tableOptions,page:e.params.page,limit:e.params.pageSize,operations:e.tableOperations},on:{pagination:e.getList,"update:page":function(t){return e.$set(e.params,"page",t)},"update:limit":function(t){return e.$set(e.params,"pageSize",t)},"selection-change":e.handleSelectionChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,"before-close":e.cancel,visible:e.open,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"子消息编码",prop:"msgTypeCode"}},[a("el-input",{attrs:{placeholder:"请输入消息编码"},model:{value:e.form.msgTypeCode,callback:function(t){e.$set(e.form,"msgTypeCode",t)},expression:"form.msgTypeCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"子消息类型名称",prop:"msgTypeName","label-width":"130px"}},[a("el-input",{attrs:{placeholder:"请输入消息类型名称"},model:{value:e.form.msgTypeName,callback:function(t){e.$set(e.form,"msgTypeName",t)},expression:"form.msgTypeName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"显示顺序",prop:"displayOrder"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:100},model:{value:e.form.displayOrder,callback:function(t){e.$set(e.form,"displayOrder",t)},expression:"form.displayOrder"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"子消息类型描述",prop:"msgTypeDesc"}},[a("el-input",{attrs:{placeholder:"请输入消息类型描述"},model:{value:e.form.msgTypeDesc,callback:function(t){e.$set(e.form,"msgTypeDesc",t)},expression:"form.msgTypeDesc"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)}),[],!1,null,"fefab314",null);t.default=o.exports},YzmK:function(e,t,a){},cqxB:function(e,t,a){"use strict";a("YzmK")}}]);
//# sourceMappingURL=59.22a74e45c69e7fee9000.js.map