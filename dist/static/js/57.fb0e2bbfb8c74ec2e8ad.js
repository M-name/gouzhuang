(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{NCNG:function(e,a,t){"use strict";t.r(a);var s=(t("V2Kg"),t("KHd+")),i=Object(s.a)({name:"userControl",data:function(){var e=this;return{loading:!1,single:!0,tableOptions:{stripe:!1,highlightCurrentRow:!0,multiSelect:!1},tableOperations:[{label:"查看",icon:"el-icon-tickets",handler:function(a){return e.handleCheck(a)}}],commonSearchList:[{prop:"msgParentCode",label:"消息类型",type:"select",options:[]},{prop:"msgTypeCode",label:"消息子类型",type:"select",options:[]},{prop:"templateCode",label:"模板编码"},{prop:"msgTitle",label:"消息标题"},{prop:"times",label:"发送时间段",type:"datePicker"}],column:[{prop:"msgParentCodeStr",label:"消息大类"},{prop:"msgTypeCodeStr",label:"消息子类"},{prop:"templateCode",label:"模板编码"},{prop:"msgTitle",label:"消息标题"},{prop:"sendChannelIdStr",label:"发送渠道"},{prop:"sendTime",label:"发送时间"},{prop:"sendBy",label:"发送员工"},{prop:"remark",label:"备注"}],tableData:[],total:0,ids:[],params:{page:1,pageSize:20,times:void 0,endTime:void 0,startTime:void 0,msgParentCode:void 0,msgTypeCode:void 0,templateCode:void 0}}},watch:{"params.msgParentCode":{handler:function(e,a){var t=this;e&&(this.params.msgTypeCode=void 0,this.$request.msgTemplateTypeList({type:1,msgTypeCode:e}).then((function(e){t.commonSearchList.forEach((function(a){"select"==a.type&&"msgTypeCode"==a.prop&&(a.options=[],e.data.data.map((function(e){a.options.push({label:e.msgTypeName,value:e.msgTypeCode})})))}))})))},deep:!0,immediate:!0}},created:function(){var e=this;this.$request.msgTemplateTypeList({type:0}).then((function(a){e.commonSearchList.forEach((function(e){"select"==e.type&&"msgParentCode"==e.prop&&a.data.data.map((function(a){e.options.push({label:a.msgTypeName,value:a.msgTypeCode})}))}))})),this.getList()},methods:{handleSelectionChange:function(e){this.ids=e.map((function(e){return e.newsCode})),this.single=1!=e.length},handleQuery:function(){this.params.page=1,this.params.times?(this.params.startTime=this.params.times[0],this.params.endTime=this.params.times[1],this.params.times=void 0):(this.params.startTime=void 0,this.params.endTime=void 0),this.getList()},resetQuery:function(){this.params={page:1,pageSize:20,times:void 0,endTime:void 0,startTime:void 0,msgParentCode:void 0,msgTypeCode:void 0,templateCode:void 0},this.handleQuery()},handleCheck:function(e){this.$router.push({path:"/messageManageDetail",name:"messageManageDetail",params:{code:e.batchCode}})},getList:function(){var e=this;this.loading=!0,this.$request.msgSendBatchList(this.params).then((function(a){200===a.data.status?(e.tableData=a.data.data.rows,e.total=a.data.data.records,e.params.page=a.data.data.page,e.loading=!1):(e.loading=!1,e.$message.error(a.data.msg))}))}}},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"container"},[t("div",{staticStyle:{"padding-right":"20px",background:"#fff"}},[t("CommonSearch",{attrs:{queryParams:e.params,searchList:e.commonSearchList},on:{resetQuery:e.resetQuery,handleQuery:e.handleQuery,"update:queryParams":function(a){e.params=a},"update:query-params":function(a){e.params=a}}})],1),e._v(" "),t("div",{staticClass:"operation"},[t("CommonTable",{attrs:{total:e.total,loading:e.loading,defColumns:e.column,dataList:e.tableData,options:e.tableOptions,page:e.params.page,limit:e.params.pageSize,operations:e.tableOperations},on:{pagination:e.getList,"update:page":function(a){return e.$set(e.params,"page",a)},"update:limit":function(a){return e.$set(e.params,"pageSize",a)},"selection-change":e.handleSelectionChange}})],1)])}),[],!1,null,"18cef64a",null);a.default=i.exports},V2Kg:function(e,a,t){"use strict";var s=t("nkvx");t.n(s).a},nkvx:function(e,a,t){}}]);
//# sourceMappingURL=57.fb0e2bbfb8c74ec2e8ad.js.map