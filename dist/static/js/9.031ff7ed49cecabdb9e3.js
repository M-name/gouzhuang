(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"8DEy":function(e,t,a){var o=a("MhL/"),r=a("S5+y");a("k6n4")("keys",(function(){return function(e){return r(o(e))}}))},D65E:function(e,t,a){"use strict";a.r(t);var o=a("EPZ6"),r=a.n(o),i=a("/umX"),s=a.n(i),l={name:"userControl",data:function(){var e,t=this;return{chooseTableOperations:[{label:"选择",icon:"el-icon-edit",handler:function(e){return t.choose(e)}}],chooseTableOptions:{stripe:!1,highlightCurrentRow:!0,multiSelect:!1,border:!1},chooseTableData:[],chooseColumn:[{prop:"userName",label:"用户姓名"},{prop:"certificateTypeIdStr",label:"证件类型"},{prop:"certificateCode",label:"证件号码"},{prop:"userSexStr",label:"性别"},{prop:"contactMethod",label:"联系人电话"},{prop:"mobile",label:"电话"},{prop:"liveStatusStr",label:"居住状态"}],isOutPeople:!1,header:{"Content-Type":"multipart/form-data"},dialogImageUrl:"",dialogVisible:!1,disabled:!1,loading:!1,chooseLoading:!1,tableOptions:{stripe:!1,highlightCurrentRow:!0,multiSelect:!1},tableOperations:[{label:"查看",icon:"el-icon-tickets",handler:function(e){return t.handleCheak(e)}},{label:"修改",icon:"el-icon-edit",handler:function(e){return t.handleUpdate(e)}},{label:"删除",style:{color:"#F56C6C"},icon:"el-icon-delete",handler:function(e){return t.handleDelete(e)}}],commonSearchList:[{prop:"plateNo",label:"车牌号 "},{prop:"parkingCode",label:" 车位编码"},{prop:"carOwnerTypeId",label:"车主类型",type:"select",options:[]},{prop:"entryStatus",label:"录入状态",type:"select",options:[]},{prop:"printStatus",label:"打印状态",type:"select",options:[]},{prop:"times",label:"登记时间段",type:"datePicker"}],open:!1,chooseShow:!1,title:"",chooseSearchList:[{prop:"buildingCode",label:"房间编码"},{prop:"userName",label:"用户姓名"},{prop:"certificateCode",label:"身份证号"},{prop:"mobile",label:"电话号码"},{prop:"hao",label:"门禁号"},{prop:"liveType",label:"证件类型",type:"select",options:[]},{prop:"liveStatus",label:"居住状态",type:"select",options:[]},{prop:"liveTypeId",label:"住户类型",type:"select",options:[]}],column:[{prop:"plateNo",label:"车牌号 "},{prop:"carColorStr",label:"车身颜色"},{prop:"carModelStr",label:"车辆类型"},{prop:"brandModel",label:"品牌型号"},{prop:"carOwner",label:"车主姓名"},{prop:"ownerMobile",label:"车主联系方式"},{prop:"identityNo",label:"车主证件编码"},{prop:"carOwnerTypeIdStr",label:"车主类型"},{prop:"parkingCode",label:"车位编码"},{prop:"entryStatusStr",label:"录入状态"},{prop:"printStatusStr",label:"打印状态"},{prop:"createTime",label:"登记时间"},{prop:"handleBy",label:"办理人员"}],tableData:[],total:0,chooseTotal:0,form:{},rules:{carOwner:[{required:!0,message:"车主姓名不能为空",trigger:"change"}],ownerMobile:[{required:!0,message:"手机号不能为空",trigger:"change"},this.$rules.mobile(void 0,"blur")],plateNo:[{required:!0,message:"车牌号不能为空",trigger:"change"}],carColor:[{required:!0,message:"车身颜色不能为空",trigger:"change"}],carModel:[{required:!0,message:"车辆类型不能为空",trigger:"change"}],brandModel:[{required:!0,message:"品牌型号不能为空",trigger:"change"}],parkingCode:[{required:!0,message:"车位编码不能为空",trigger:"change"}],certificateTypeId:[{required:!0,message:"证件类型不能为空",trigger:"change"}],identityNo:[{required:!0,message:"证件编码不能为空",trigger:"change"}]},ids:[],dicList:[],roleStatus:[],fileImg:[],uploadImgList:[],chooseParams:(e={page:1,pageSize:10,newsTitle:void 0,publishStatus:void 0},s()(e,"newsTitle",void 0),s()(e,"publishStatus",void 0),s()(e,"newsTitle",void 0),s()(e,"publishStatus",void 0),s()(e,"newsTitle",void 0),s()(e,"publishStatus",void 0),e),params:{page:1,pageSize:20,plateNo:void 0,parkingCode:void 0,carOwnerTypeId:void 0,times:void 0,endTime:void 0,startTime:void 0}}},watch:{"form.carOwnerTypeId":{handler:function(e,t){this.isOutPeople=50==e},deep:!0,immediate:!0}},created:function(){var e=this;this.$request.parkingFindEnum().then((function(t){e.dicList=t.data.data,e.commonSearchList.forEach((function(t){"select"==t.type&&"carOwnerTypeId"==t.prop&&e.dicList.carOwnerEnum.map((function(e){t.options.push({label:e.value,value:e.type})})),"select"==t.type&&"printStatus"==t.prop&&e.dicList.printStatusEnum.map((function(e){t.options.push({label:e.value,value:e.type})})),"select"==t.type&&"entryStatus"==t.prop&&e.dicList.entryStatusEnum.map((function(e){t.options.push({label:e.value,value:e.type})}))}))})),this.$request.detailFindEnum().then((function(t){e.dicLists=t.data.data;var a=t.data.data;e.chooseSearchList.forEach((function(e){"select"==e.type&&"liveStatus"==e.prop&&a.liveStatusEnum.map((function(t){e.options.push({label:t.value,value:t.type})})),"select"==e.type&&"liveTypeId"==e.prop&&a.reasonEnum.map((function(t){e.options.push({label:t.value,value:t.type})})),"select"==e.type&&"liveType"==e.prop&&a.certificateEnum.map((function(t){e.options.push({label:t.value,value:t.type})}))}))})),this.getList(),this.chooseGetList()},methods:{parkingCodeChange:function(e){var t=this;this.$request.parkingFindParkingCode(e).then((function(e){200==e.data.status?(t.form.carOwnerTypeId=e.data.data.tenantTypeId,t.form.carOwner=e.data.data.userName,e.data.data.userCode?t.form.userCode=e.data.data.userCode:t.form.userCode=void 0,t.form.ownerMobile=e.data.data.mobile,t.form.certificateTypeId=e.data.data.certificateTypeId,t.form.identityNo=e.data.data.certificateNo):t.$message.error(e.data.msg)}))},choose:function(e){var t=this;this.$request.peopleFfindUser({id:e.id,userCode:e.userCode}).then((function(e){200==e.data.status?(t.form.carOwner=e.data.data.userName,t.form.userCode=e.data.data.userCode,t.form.ownerMobile=e.data.data.mobile,t.form.certificateTypeId=e.data.data.certificateTypeId,t.form.identityNo=e.data.data.certificateCode,t.chooseShow=!1,e.data.data.userAddr?t.isAddress=!0:t.isAddress=!1):t.$message.error(e.data.msg)}))},chooseGetList:function(){var e=this;this.chooseLoading=!0,this.$request.detailAll(this.chooseParams).then((function(t){200==t.data.status?(e.chooseTableData=t.data.data.rows,e.chooseTotal=t.data.data.records,e.chooseParams.page=t.data.data.page,e.chooseLoading=!1):(e.chooseLoading=!1,e.$message.error(t.data.msg))}))},chooseHandleQuery:function(){this.chooseParams.page=1,this.chooseGetList()},chooseResetQuery:function(){var e;this.chooseParams=(e={page:1,pageSize:10,newsTitle:void 0,publishStatus:void 0},s()(e,"newsTitle",void 0),s()(e,"publishStatus",void 0),s()(e,"newsTitle",void 0),s()(e,"publishStatus",void 0),s()(e,"newsTitle",void 0),s()(e,"publishStatus",void 0),e),this.chooseHandleQuery()},uploadSectionFile:function(e){var t=this,a=new FormData;a.append("file",e.file),this.$request.upload(a).then((function(e){if(200==e.data.status){var a={url:e.data.data.split(",")[1]};t.fileImg.push(a),t.uploadImgList.push({code:e.data.data.split(",")[0],url:e.data.data.split(",")[1]})}else t.$message.error(e.data.msg)}))},getLocalImg:function(e){var t=e.url;this.dialogImageUrl=t,this.dialogVisible=!0},getLocalImgs:function(e,t){var a=this;this.uploadImgList.forEach((function(t,o){t.url==e.url&&(console.log(o),a.uploadImgList.splice(o,1))}))},selectDictLabel:function(e,t){var a=[];return r()(e).map((function(o){if(e[o].value==""+t)return a.push(e[o].label),!1})),a.join("")},handleQuery:function(){this.params.page=1,this.params.times?(this.params.startTime=this.params.times[0],this.params.endTime=this.params.times[1]):(this.params.startTime=void 0,this.params.endTime=void 0),this.getList()},resetQuery:function(){this.params={page:1,pageSize:20,plateNo:void 0,parkingCode:void 0,carOwnerTypeId:void 0,times:void 0,endTime:void 0,startTime:void 0},this.handleQuery()},handleUpdate:function(e){var t=this;this.reset(),this.$request.parkingFindCar(e.id).then((function(e){t.form=e.data.data,t.open=!0,t.title="修改车辆档案"}))},handleCheak:function(e){this.$router.push({path:"/carDetail",name:"carDetail",params:{code:e.id}})},cancel:function(){this.open=!1,this.reset(),this.$refs.form.resetFields(),this.$refs.upload.clearFiles()},Export:function(){this.$request.parkingDownloadCarExcel(this.params)},submitForm:function(){var e=this;this.$refs.form.validate((function(t){if(t)if(e.form.createTime)e.$request.parkingUpdateCar(e.form).then((function(t){200===t.data.status?(e.msgSuccess("修改成功"),e.open=!1,e.getList(),e.$refs.form.resetFields()):e.$message.error(t.data.msg)}));else{for(var a=[],o=0;o<e.uploadImgList.length;o++)a.push(e.uploadImgList[o].code),console.log(e.uploadImgList[o].code);e.form.certificateImageCode=a.toString(),e.$request.parkingCreateCar(e.form).then((function(t){200===t.data.status?(e.msgSuccess("新增成功"),e.open=!1,e.getList(),e.$refs.form.resetFields()):e.$message.error(t.data.msg)}))}}))},choosePeople:function(){this.chooseShow=!0},reset:function(){this.form={plateNo:void 0,carColor:void 0,carModel:void 0,brandModel:void 0,parkingCode:void 0,entryStatus:0,printStatus:0,remark:void 0,carOwnerTypeId:51,carOwner:void 0,userCode:void 0,ownerMobile:void 0,certificateTypeId:void 0,identityNo:void 0,certificateImageCode:void 0},this.fileImg=[],this.uploadImgList=[]},carOwnerReset:function(){this.form.carOwner=void 0,this.form.ownerMobile=void 0,this.form.certificateTypeId=void 0,this.form.identityNo=void 0},addList:function(){this.reset(),this.open=!0,this.title="新建车辆档案"},getList:function(){var e=this;this.loading=!0,this.$request.parkingCarList(this.params).then((function(t){200===t.data.status?(e.tableData=t.data.data.rows,e.total=t.data.data.records,e.params.page=t.data.data.page,e.loading=!1):(e.loading=!1,e.$message.error(t.data.msg))}))},handleDelete:function(e){var t=this,a=e.id;this.$confirm("是否确认删除该记录?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$request.parkingDelCar(a).then((function(){200==res.data.status?(t.getList(),t.msgSuccess("删除成功")):t.$message.error(res.data.msg)}))})).catch((function(){}))}}},n=(a("rL+v"),a("SsL+")),p=Object(n.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticStyle:{"padding-right":"20px",background:"#fff"}},[a("CommonSearch",{attrs:{queryParams:e.params,searchList:e.commonSearchList},on:{resetQuery:e.resetQuery,handleQuery:e.handleQuery,"update:queryParams":function(t){e.params=t},"update:query-params":function(t){e.params=t}}})],1),e._v(" "),a("div",{staticClass:"operation"},[a("div",{staticClass:"button"},[a("el-row",{staticClass:"operations-row",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"mini"},on:{click:e.addList}},[e._v("新建车辆档案")])],1),e._v(" "),a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-download",size:"mini"},on:{click:e.Export}},[e._v("导出Excel")])],1)],1)],1),e._v(" "),a("CommonTable",{attrs:{total:e.total,loading:e.loading,defColumns:e.column,dataList:e.tableData,options:e.tableOptions,page:e.params.page,limit:e.params.pageSize,operations:e.tableOperations},on:{pagination:e.getList,"update:page":function(t){return e.$set(e.params,"page",t)},"update:limit":function(t){return e.$set(e.params,"pageSize",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,"before-close":e.cancel,visible:e.open,width:"700px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"83px"}},[a("i",{staticClass:"el-icon-s-custom"}),e._v(" "),a("span",[e._v("车辆基本信息")]),e._v(" "),a("el-divider"),e._v(" "),a("el-form-item",{attrs:{label:"车牌号:",prop:"plateNo"}},[a("el-input",{attrs:{placeholder:"请输入车牌号"},model:{value:e.form.plateNo,callback:function(t){e.$set(e.form,"plateNo",t)},expression:"form.plateNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"车身颜色:",prop:"carColor"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.carColor,callback:function(t){e.$set(e.form,"carColor",t)},expression:"form.carColor"}},e._l(e.dicList.vehicleColorEnum,(function(e){return a("el-option",{key:e.type,attrs:{label:e.value,value:e.type}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"车辆类型:",prop:"carModel"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.carModel,callback:function(t){e.$set(e.form,"carModel",t)},expression:"form.carModel"}},e._l(e.dicList.vehicleTypeEnum,(function(e){return a("el-option",{key:e.type,attrs:{label:e.value,value:e.type}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌型号:",prop:"brandModel"}},[a("el-input",{attrs:{placeholder:"请输入品牌型号（例：大众）"},model:{value:e.form.brandModel,callback:function(t){e.$set(e.form,"brandModel",t)},expression:"form.brandModel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"车位编码:",prop:"parkingCode"}},[a("el-input",{attrs:{placeholder:"请输入车位编码"},on:{change:e.parkingCodeChange},model:{value:e.form.parkingCode,callback:function(t){e.$set(e.form,"parkingCode",t)},expression:"form.parkingCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"录入状态:",prop:"entryStatus"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.entryStatus,callback:function(t){e.$set(e.form,"entryStatus",t)},expression:"form.entryStatus"}},e._l(e.dicList.entryStatusEnum,(function(e){return a("el-option",{key:e.type,attrs:{label:e.value,value:e.type}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"打印状态:",prop:"printStatus"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.printStatus,callback:function(t){e.$set(e.form,"printStatus",t)},expression:"form.printStatus"}},e._l(e.dicList.printStatusEnum,(function(e){return a("el-option",{key:e.type,attrs:{label:e.value,value:e.type}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"车辆备注:",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入车辆备注"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),e._v(" "),a("i",{staticClass:"el-icon-s-custom"}),e._v(" "),a("span",[e._v("所有人基本信息")]),e._v(" "),a("el-divider"),e._v(" "),a("el-form-item",{attrs:{label:"车主类型:",prop:"carOwnerTypeId"}},[a("el-radio-group",{on:{change:e.carOwnerReset},model:{value:e.form.carOwnerTypeId,callback:function(t){e.$set(e.form,"carOwnerTypeId",t)},expression:"form.carOwnerTypeId"}},e._l(e.dicList.rentPersonEnum,(function(t,o){return a("el-radio",{key:o,attrs:{label:t.type}},[e._v(e._s(t.value))])})),1)],1),e._v(" "),e.isOutPeople?a("el-form-item",{attrs:{label:"车主姓名:",prop:"carOwner"}},[a("el-input",{staticClass:"elinput",attrs:{disabled:e.isOutPeople,placeholder:"请输入车主姓名"},model:{value:e.form.carOwner,callback:function(t){e.$set(e.form,"carOwner",t)},expression:"form.carOwner"}}),e._v(" "),a("el-button",{staticClass:"btn-buka",attrs:{type:"primary"},on:{click:e.choosePeople}},[e._v("选择")])],1):a("el-form-item",{attrs:{label:"车主姓名:",prop:"carOwner"}},[a("el-input",{attrs:{disabled:e.isOutPeople,placeholder:"请输入车主姓名"},model:{value:e.form.carOwner,callback:function(t){e.$set(e.form,"carOwner",t)},expression:"form.carOwner"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式:",prop:"ownerMobile"}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.form.ownerMobile,callback:function(t){e.$set(e.form,"ownerMobile",t)},expression:"form.ownerMobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"证件类型:",prop:"certificateTypeId"}},[a("el-select",{attrs:{disabled:e.isOutPeople,placeholder:"请选择"},model:{value:e.form.certificateTypeId,callback:function(t){e.$set(e.form,"certificateTypeId",t)},expression:"form.certificateTypeId"}},e._l(e.dicList.certificateEnum,(function(e){return a("el-option",{key:e.type,attrs:{label:e.value,value:e.type}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"证件号码:",prop:"identityNo"}},[a("el-input",{attrs:{disabled:e.isOutPeople,placeholder:"请输入证件号码"},model:{value:e.form.identityNo,callback:function(t){e.$set(e.form,"identityNo",t)},expression:"form.identityNo"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"证件上传:",prop:"certificateImageCode"}},[a("el-upload",{ref:"upload",attrs:{action:"uploadUrl","list-type":"picture-card","http-request":e.uploadSectionFile,headers:e.header,"with-credentials":!0,accept:"image/png, image/gif, image/jpg, image/jpeg","on-preview":e.getLocalImg,"on-remove":e.getLocalImgs,"file-list":e.fileImg}},[a("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"所有人选择",width:"800px",visible:e.chooseShow},on:{"update:visible":function(t){e.chooseShow=t}}},[a("div",{staticStyle:{"margin-top":"-20px"}},[a("CommonSearch",{attrs:{queryParams:e.chooseParams,searchList:e.chooseSearchList},on:{resetQuery:e.chooseResetQuery,handleQuery:e.chooseHandleQuery,"update:queryParams":function(t){e.chooseParams=t},"update:query-params":function(t){e.chooseParams=t}}})],1),e._v(" "),a("CommonTable",{attrs:{total:e.chooseTotal,loading:e.chooseLoading,tooltipShow:!0,defColumns:e.chooseColumn,dataList:e.chooseTableData,options:e.chooseTableOptions,page:e.chooseParams.page,limit:e.chooseParams.pageSize,operations:e.chooseTableOperations},on:{pagination:e.chooseGetList,"update:page":function(t){return e.$set(e.chooseParams,"page",t)},"update:limit":function(t){return e.$set(e.chooseParams,"pageSize",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{width:"600px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("image",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)}),[],!1,null,"2ada0eb2",null);t.default=p.exports},EPZ6:function(e,t,a){e.exports={default:a("xSEk"),__esModule:!0}},gTTH:function(e,t,a){},k6n4:function(e,t,a){var o=a("fCtq"),r=a("zpmP"),i=a("mf7F");e.exports=function(e,t){var a=(r.Object||{})[e]||Object[e],s={};s[e]=t(a),o(o.S+o.F*i((function(){a(1)})),"Object",s)}},"rL+v":function(e,t,a){"use strict";a("gTTH")},xSEk:function(e,t,a){a("8DEy"),e.exports=a("zpmP").Object.keys}}]);
//# sourceMappingURL=9.031ff7ed49cecabdb9e3.js.map