(window.webpackJsonp=window.webpackJsonp||[]).push([[48,85],{"8Bov":function(t,e,a){"use strict";a("IZTe")},EiDx:function(t,e,a){"use strict";a.r(e);var i=a("UMR9"),n=a.n(i),s={name:"wangeditor",data:function(){return{editorContent:""}},props:{content:{type:String},disabled:{default:!1}},watch:{content:function(t,e){this.wEditor.txt.html(t)}},methods:{getContent:function(){return this.wEditor.txt.html()},setContent:function(){this.wEditor.txt.html(this.content)},clearContent:function(){this.wEditor.txt.clear()}},mounted:function(){var t=this,e=this;this.wEditor=new n.a(this.$refs.editor);var a=this.wEditor;a.config.customUploadImg=function(t,a){var i=new FormData;i.append("file",t[0]),e.$request.upload(i).then((function(t){a(t.data.data.split(",")[1])}))},a.config.uploadImgServer="http://47.118.43.170:8080/api/cos/upload",a.config.onchange=function(e){t.editorContent=e},a.create(),a.txt.html(this.content),this.disabled?a.$textElem.attr("contenteditable",!1):a.$textElem.attr("contenteditable",!0)}},o=a("SsL+"),r=Object(o.a)(s,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{ref:"editor",staticStyle:{"text-align":"left"}})])}),[],!1,null,"69fd3103",null);e.default=r.exports},IZTe:function(t,e,a){},rMPO:function(t,e,a){"use strict";a.r(e);var i={name:"userControl",components:{wangEditor:a("EiDx").default},data:function(){var t=this;return{message:"",loading:!1,single:!0,tableOptions:{stripe:!1,highlightCurrentRow:!0,multiSelect:!1},tableOperations:[{label:"修改",icon:"el-icon-edit",handler:function(e){return t.handleUpdate(e)}},{label:"删除",style:{color:"#F56C6C"},icon:"el-icon-delete",handler:function(e){return t.handleDelete(e)}}],commonSearchList:[{prop:"columnName",label:"栏目名称"}],open:!1,title:"",column:[{prop:"columnName",label:"栏目名称 "},{prop:"columnDesc",label:"栏目描述"},{prop:"isUsingStr",label:"是否使用"},{prop:"createTime",label:"创建时间"},{prop:"createBy",label:"创建员工"}],tableData:[],total:0,form:{},rules:{columnName:[{required:!0,message:"栏目名称不能为空",trigger:"change"}],columnDesc:[{required:!0,message:"栏目描述不能为空",trigger:"change"}]},ids:[],roleStatus:[],params:{page:1,pageSize:20,buildingCode:void 0,times:void 0,endTime:void 0,startTime:void 0}}},created:function(){this.getList()},methods:{handleSelectionChange:function(t){this.ids=t.map((function(t){return t.id})),this.single=1!=t.length},handleQuery:function(){this.params.page=1,this.params.times?(this.params.startTime=this.params.times[0],this.params.endTime=this.params.times[1],this.params.times=void 0):(this.params.startTime=void 0,this.params.endTime=void 0),this.getList()},resetQuery:function(){this.params={page:1,pageSize:20,buildingCode:void 0,times:void 0,endTime:void 0,startTime:void 0},this.handleQuery()},handleUpdate:function(t){var e=this;this.reset();var a=t.id;this.$request.helpFind(a).then((function(t){200===t.data.status?(e.form=t.data.data,e.message=t.data.data.columnContent,e.open=!0,e.title="修改栏目"):e.$message.error(t.data.msg)}))},cancel:function(){this.open=!1,this.reset(),this.$refs.form.resetFields()},submitForm:function(){var t=this;""!=this.$refs.wangeditor.editorContent?(this.form.columnContent=this.$refs.wangeditor.editorContent,this.$refs.form.validate((function(e){e&&(t.form.createTime?t.$request.helpUpdate(t.form).then((function(e){200===e.data.status?(t.msgSuccess("修改成功"),t.open=!1,t.getList(),t.$refs.form.resetFields()):t.$message.error(e.data.msg)})):t.$request.helpCreate(t.form).then((function(e){200===e.data.status?(t.msgSuccess("新增成功"),t.open=!1,t.getList(),t.$refs.form.resetFields()):t.$message.error(e.data.msg)})))}))):this.$message.error("内容不能为空")},reset:function(){this.form={columnName:void 0,columnDes:void 0,columnContent:void 0,isUsing:1}},addList:function(){this.reset(),this.open=!0,this.title="添加栏目"},getList:function(){var t=this;this.loading=!0,this.$request.helpList(this.params).then((function(e){200==e.data.status?(t.tableData=e.data.data.rows,t.total=e.data.data.records,t.params.page=e.data.data.page,t.loading=!1):(t.loading=!1,t.$message.error(e.data.msg))}))},handleDelete:function(t){var e=this;this.$confirm("是否确认删除该栏目?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$request.helpDel({ids:t.id}).then((function(t){200==t.data.status?(e.getList(),e.msgSuccess("删除成功")):e.$message.error(t.data.msg)}))})).catch((function(){}))}}},n=(a("8Bov"),a("SsL+")),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticStyle:{"padding-right":"20px",background:"#fff"}},[a("CommonSearch",{attrs:{queryParams:t.params,searchList:t.commonSearchList},on:{resetQuery:t.resetQuery,handleQuery:t.handleQuery,"update:queryParams":function(e){t.params=e},"update:query-params":function(e){t.params=e}}})],1),t._v(" "),a("div",{staticClass:"operation"},[a("div",{staticClass:"button"},[a("el-row",{staticClass:"operations-row",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"mini"},on:{click:t.addList}},[t._v("新增")])],1)],1)],1),t._v(" "),a("CommonTable",{attrs:{total:t.total,loading:t.loading,defColumns:t.column,dataList:t.tableData,options:t.tableOptions,page:t.params.page,limit:t.params.pageSize,operations:t.tableOperations},on:{pagination:t.getList,"update:page":function(e){return t.$set(t.params,"page",e)},"update:limit":function(e){return t.$set(t.params,"pageSize",e)},"selection-change":t.handleSelectionChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,"before-close":t.cancel,visible:t.open,width:"700px","append-to-body":""},on:{"update:visible":function(e){t.open=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"栏目名称",prop:"columnName"}},[a("el-input",{attrs:{placeholder:"请输入栏目名称"},model:{value:t.form.columnName,callback:function(e){t.$set(t.form,"columnName",e)},expression:"form.columnName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"栏目描述",prop:"columnDesc"}},[a("el-input",{attrs:{placeholder:"请输入栏目描述"},model:{value:t.form.columnDesc,callback:function(e){t.$set(t.form,"columnDesc",e)},expression:"form.columnDesc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否使用",prop:"isUsing"}},[a("el-radio-group",{model:{value:t.form.isUsing,callback:function(e){t.$set(t.form,"isUsing",e)},expression:"form.isUsing"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"栏目内容",prop:"columnContent"}},[t.open?a("wang-editor",{ref:"wangeditor",attrs:{content:t.message}}):t._e()],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)}),[],!1,null,"32de8768",null);e.default=s.exports}}]);
//# sourceMappingURL=48.ae2e42eba4cd77c46475.js.map