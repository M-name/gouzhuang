(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{"Jl/7":function(t,e,a){"use strict";a("qAi0")},RKYM:function(t,e,a){"use strict";a.r(e);var s={data:function(){var t=this;return{params:{page:1,pageSize:20,paymentStatus:1,userName:void 0,buildingCode:void 0,mobile:void 0,certificateCode:void 0,parkingCode:void 0},tableData:[],loading:!1,total:0,tableOptions:{stripe:!1,highlightCurrentRow:!0,multiSelect:!0},tableOperations:[{label:"删除",style:{color:"#F56C6C"},icon:"el-icon-delete",handler:function(e){return t.handleDelete(e)}},{label:"复核",icon:"el-icon-reading",handler:function(e){return t.cheakAgain(e)},isShow:function(t){return 1==t.paymentStatus}},{label:"发布",icon:"iconfont icon-publish",handler:function(e){return t.release(e)},isShow:function(t){return 2==t.paymentStatus}}],column:[{prop:"orderYear",label:"账单年度"},{prop:"serviceEndTime",label:"账单周期",render:function(t,e){return t("div",[e.row.serviceStartTime+"~"+e.row.serviceEndTime])}},{prop:"buildingCode",label:"房屋编码"},{prop:"buildingArea",label:"房屋面积(m²)",width:"160"},{prop:"userName",label:"住户姓名"},{prop:"mobile",label:"手机号"},{prop:"certificateCode",label:"证件号码"},{prop:"parkingCode",label:"车位编码"},{prop:"feeName",label:"费用名称"},{prop:"orderAmount",label:"应支付(元)"},{prop:"discountAmount",label:"优惠金额(元)"},{prop:"paidAmount",label:"实际已付(元)"},{prop:"paymentStatusValue",label:"账单状态"},{prop:"createTime",label:"生成日期"}],commonSearchList:[{prop:"userName",label:"住户姓名"},{prop:"buildingCode",label:"房屋编码"},{prop:"mobile",label:"手机号"},{prop:"certificateCode",label:"证件号码"},{prop:"parkingCode",label:"车位编码"}],orderParam:{feeName:"住宅托管费"},orderList:{},multiple:!0,billList:[]}},mounted:function(){this.getOrderStatis()},methods:{getOrderStatis:function(){var t=this;this.params.feeName=this.orderParam.feeName,this.getList(),this.$request.orderStatisticsReview(this.orderParam).then((function(e){200==e.data.status?t.orderList=e.data.data:t.$message.error(e.data.msg)}))},getList:function(){var t=this;this.loading=!0,this.params.feeName=this.orderParam.feeName,this.$request.orderFindAll(this.params).then((function(e){200==e.data.status?(t.tableData=e.data.data.rows,t.total=e.data.data.records,t.params.page=e.data.data.page,t.loading=!1):t.$message.error(e.data.msg)}))},handleSelectionChange:function(t){this.billList=t,this.multiple=!t.length,console.log(this.billList)},handleQuery:function(){this.params.page=1,this.getList()},resetQuery:function(){this.params={page:1,pageSize:20,paymentStatus:1,userName:void 0,buildingCode:void 0,mobile:void 0,certificateCode:void 0,parkingCode:void 0},this.handleQuery()},handleDelete:function(t){var e=this;this.$confirm("是否确认删除该账单?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$request.orderDelete(t.id).then((function(){200==res.data.status?(e.getList(),e.msgSuccess("删除成功")):e.$message.error(res.data.msg)}))})).catch((function(){}))},cheakAgain:function(t){var e=this,a=[];t&&a.push(t);for(var s=a.length>0?a:this.billList,i=0;i<s.length;i++)if(2==s[i].paymentStatus)return void this.$message.error("所选账单含有其他状态账单，请确认后再提交复核");this.$confirm("是否确已认复核该账单?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$request.orderReviewBatch(s).then((function(){200==res.data.status?(e.getList(),e.msgSuccess("复核成功")):e.$message.error(res.data.msg)}))})).catch((function(){}))},cheakAgainAll:function(){var t=this;this.$confirm("是否确认复核所有账单?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$request.orderReviewAll().then((function(){200==res.data.status?(t.getList(),t.msgSuccess("复核成功")):t.$message.error(res.data.msg)}))})).catch((function(){}))},releaseAll:function(){var t=this;this.$confirm("是否确认发布所有账单?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$request.orderPublishAll().then((function(){200==res.data.status?(t.getList(),t.msgSuccess("发布成功")):t.$message.error(res.data.msg)}))})).catch((function(){}))},release:function(t){var e=this,a=[];t&&a.push(t);for(var s=a.length>0?a:this.billList,i=0;i<s.length;i++)if(1==s[i].paymentStatus)return void this.$message.error("所选账单包含未复核账单，请复核后再发布");this.$confirm("是否确认发布所选的账单?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$request.orderPublishBatch(s).then((function(){200==res.data.status?(e.getList(),e.msgSuccess("发布成功")):e.$message.error(res.data.msg)}))})).catch((function(){}))}}},i=(a("Jl/7"),a("SsL+")),r=Object(i.a)(s,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[s("div",{staticClass:"tabs"},[s("el-tabs",{on:{"tab-click":t.getOrderStatis},model:{value:t.orderParam.feeName,callback:function(e){t.$set(t.orderParam,"feeName",e)},expression:"orderParam.feeName"}},[s("el-tab-pane",{attrs:{label:"住宅托管费",name:"住宅托管费"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"房屋能耗费",name:"房屋能耗费"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"车位管理费",name:"车位管理费"}}),t._v(" "),s("el-tab-pane",{attrs:{label:"车位租赁费",name:"车位租赁费"}})],1),t._v(" "),s("div",{staticClass:"cost-form"},[s("div",{staticClass:"cost-statistics"},[s("img",{attrs:{src:a("uQ3u"),alt:""}}),t._v(" "),s("div",[s("p",[t._v("已生成/应生成")]),t._v(" "),s("span",[t._v(t._s(t.orderList.created)+"/"+t._s(t.orderList.create))])])]),t._v(" "),s("div",{staticClass:"cost-statistics"},[s("div",{staticClass:"cost-statistics"},[s("img",{attrs:{src:a("6squ"),alt:""}}),t._v(" "),s("div",[s("p",[t._v("生成率")]),t._v(" "),s("span",[t._v(t._s(t.orderList.percentage))])])])]),t._v(" "),s("div",{staticClass:"cost-statistics"},[s("div",{staticClass:"cost-statistics"},[s("img",{attrs:{src:a("er5I"),alt:""}}),t._v(" "),s("div",[s("p",[t._v("已复核/应复核")]),t._v(" "),s("span",[t._v(t._s(t.orderList.reviewd)+"/"+t._s(t.orderList.created))])])])]),t._v(" "),s("div",{staticClass:"cost-statistics"},[s("div",{staticClass:"cost-statistics"},[s("img",{attrs:{src:a("vxlI"),alt:""}}),t._v(" "),s("div",[s("p",[t._v("复核率")]),t._v(" "),s("span",[t._v(t._s(t.orderList.checkRate))])])])]),t._v(" "),s("div",{staticClass:"cost-statistics"},[s("div",{staticClass:"cost-statistics"},[s("img",{attrs:{src:a("X6+8"),alt:""}}),t._v(" "),s("div",[s("p",[t._v("账单总额")]),t._v(" "),s("span",[t._v(t._s(t.orderList.total))])])])])])],1),t._v(" "),s("div",{staticClass:"cost-content"},[s("div",{staticClass:"search-box"},[s("CommonSearch",{attrs:{queryParams:t.params,searchList:t.commonSearchList},on:{resetQuery:t.resetQuery,handleQuery:t.handleQuery,"update:queryParams":function(e){t.params=e},"update:query-params":function(e){t.params=e}}})],1),t._v(" "),s("div",{staticClass:"btn"},[s("el-button",{attrs:{disabled:t.multiple,size:"small",type:"primary"},on:{click:function(e){return t.release()}}},[t._v("批量发布账单")]),t._v(" "),s("el-button",{attrs:{disabled:t.multiple,size:"small",type:"primary"},on:{click:function(e){return t.cheakAgain()}}},[t._v("批量复核账单")]),t._v(" "),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.cheakAgainAll()}}},[t._v("一键复核账单")]),t._v(" "),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.releaseAll()}}},[t._v("一键发布账单")])],1),t._v(" "),s("CommonTable",{attrs:{total:t.total,loading:t.loading,defColumns:t.column,dataList:t.tableData,options:t.tableOptions,page:t.params.page,limit:t.params.pageSize,operations:t.tableOperations},on:{pagination:t.getList,"update:page":function(e){return t.$set(t.params,"page",e)},"update:limit":function(e){return t.$set(t.params,"pageSize",e)},"selection-change":t.handleSelectionChange}})],1)])}),[],!1,null,"72789b84",null);e.default=r.exports},qAi0:function(t,e,a){}}]);
//# sourceMappingURL=65.311cc7e3c6040c4ecec3.js.map