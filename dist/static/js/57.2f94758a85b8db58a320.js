(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{FLhz:function(e,t,a){},NCNG:function(e,t,a){"use strict";a.r(t);var s=(a("y94p"),a("SsL+")),i=Object(s.a)({name:"userControl",data:function(){var e=this;return{loading:!1,single:!0,tableOptions:{stripe:!1,highlightCurrentRow:!0,multiSelect:!1},tableOperations:[{label:"查看",icon:"el-icon-tickets",handler:function(t){return e.handleCheck(t)}}],commonSearchList:[{prop:"msgParentCode",label:"消息类型",type:"select",options:[]},{prop:"msgTypeCode",label:"消息子类型",type:"select",options:[]},{prop:"templateCode",label:"模板编码"},{prop:"msgTitle",label:"消息标题"},{prop:"times",label:"发送时间段",type:"datePicker"}],column:[{prop:"msgParentCodeStr",label:"消息大类"},{prop:"msgTypeCodeStr",label:"消息子类"},{prop:"templateCode",label:"模板编码"},{prop:"msgTitle",label:"消息标题"},{prop:"sendChannelIdStr",label:"发送渠道"},{prop:"sendTime",label:"发送时间"},{prop:"sendBy",label:"发送员工"},{prop:"remark",label:"备注"}],tableData:[],total:0,ids:[],params:{page:1,pageSize:20,times:void 0,endTime:void 0,startTime:void 0,msgParentCode:void 0,msgTypeCode:void 0,templateCode:void 0}}},watch:{"params.msgParentCode":{handler:function(e,t){var a=this;e&&(this.params.msgTypeCode=void 0,this.$request.msgTemplateTypeList({type:1,msgTypeCode:e}).then((function(e){a.commonSearchList.forEach((function(t){"select"==t.type&&"msgTypeCode"==t.prop&&(t.options=[],e.data.data.map((function(e){t.options.push({label:e.msgTypeName,value:e.msgTypeCode})})))}))})))},deep:!0,immediate:!0}},created:function(){var e=this;this.$request.msgTemplateTypeList({type:0}).then((function(t){e.commonSearchList.forEach((function(e){"select"==e.type&&"msgParentCode"==e.prop&&t.data.data.map((function(t){e.options.push({label:t.msgTypeName,value:t.msgTypeCode})}))}))})),this.getList()},methods:{handleSelectionChange:function(e){this.ids=e.map((function(e){return e.newsCode})),this.single=1!=e.length},handleQuery:function(){this.params.page=1,this.params.times?(this.params.startTime=this.params.times[0],this.params.endTime=this.params.times[1],this.params.times=void 0):(this.params.startTime=void 0,this.params.endTime=void 0),this.getList()},resetQuery:function(){this.params={page:1,pageSize:20,times:void 0,endTime:void 0,startTime:void 0,msgParentCode:void 0,msgTypeCode:void 0,templateCode:void 0},this.handleQuery()},handleCheck:function(e){this.$router.push({path:"/messageManageDetail",name:"messageManageDetail",params:{code:e.batchCode}})},getList:function(){var e=this;this.loading=!0,this.$request.msgSendBatchList(this.params).then((function(t){200===t.data.status?(e.tableData=t.data.data.rows,e.total=t.data.data.records,e.params.page=t.data.data.page,e.loading=!1):(e.loading=!1,e.$message.error(t.data.msg))}))}}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticStyle:{"padding-right":"20px",background:"#fff"}},[a("CommonSearch",{attrs:{queryParams:e.params,searchList:e.commonSearchList},on:{resetQuery:e.resetQuery,handleQuery:e.handleQuery,"update:queryParams":function(t){e.params=t},"update:query-params":function(t){e.params=t}}})],1),e._v(" "),a("div",{staticClass:"operation"},[a("CommonTable",{attrs:{total:e.total,loading:e.loading,defColumns:e.column,dataList:e.tableData,options:e.tableOptions,page:e.params.page,limit:e.params.pageSize,operations:e.tableOperations},on:{pagination:e.getList,"update:page":function(t){return e.$set(e.params,"page",t)},"update:limit":function(t){return e.$set(e.params,"pageSize",t)},"selection-change":e.handleSelectionChange}})],1)])}),[],!1,null,"7065398a",null);t.default=i.exports},y94p:function(e,t,a){"use strict";a("FLhz")}}]);
//# sourceMappingURL=57.2f94758a85b8db58a320.js.map