(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"+fXK":function(t,e,a){"use strict";a.r(e);var o=a("EPZ6"),i=a.n(o),s=a("/umX"),r=a.n(s),n={name:"userControl",data:function(){var t;return t={form:{},rules:{buildingCode:[{required:!0,message:"房屋编码不能为空",trigger:"change"}],buildingProp:[{required:!0,message:"房屋性质未选择",trigger:"change"}],buildingMonitorStatus:[{required:!0,message:"监管状态未选择",trigger:"change"}],permanentPersonNum:[{required:!0,message:"常住人口数量不能为空",trigger:"change"},this.$rules.number("请输入整数","change")],transientPersonNum:[{required:!0,message:"流动人口数量不能为空",trigger:"change"},this.$rules.number("请输入整数","change")],rentRoomNum:[{required:!0,message:"出租房屋数不能为空",trigger:"change"},this.$rules.number("请输入整数","change")],checkBy:[{required:!0,message:"排查人员不能为空",trigger:"change"}]},open:!1,title:"",tableData:[],total:0,staffList:[]},r()(t,"form",{}),r()(t,"hidden",!0),r()(t,"houseList",[]),r()(t,"unitList",[]),r()(t,"levelList",[]),r()(t,"roomList",[]),r()(t,"dicList",[]),r()(t,"roomParams",{type:0,code:void 0}),r()(t,"params",{page:1,pageSize:20,buildingProp:"",buildingMonitorStatus:"",parkingCode:void 0,buildingCheckStatus:"",blockNo:"",unitNo:"",floorNo:"",roomNo:""}),t},created:function(){var t=this;this.$request.alarmGetStaff().then((function(e){for(var a=e.data.data,o=[],s=0;s<i()(a).length;s++){var r={label:"",options:[]};r.label=i()(a)[s];for(var n=0;n<a[i()(a)[s]].length;n++)r.options.push({value:a[i()(a)[s]][n].realName+","+a[i()(a)[s]][n].userCode,label:a[i()(a)[s]][n].realName});o.push(r)}t.staffList=o})),this.getList(),this.getDict(),this.getRoom(0)},methods:{goDetail:function(t){this.$router.push({path:"/roomDetail",name:"roomDetail",params:{id:t.id,code:t.buildingCode}})},submitForm:function(){var t=this;console.log(this.form),this.$refs.form.validate((function(e){e&&t.$request.buildCheckCreate(t.form).then((function(e){200===e.data.status?(t.msgSuccess("添加成功"),t.open=!1,t.getList(),t.$refs.form.resetFields()):t.$message.error(e.data.msg)}))}))},addList:function(){this.reset(),this.open=!0,this.title="添加排查记录"},cancel:function(){this.open=!1,this.reset(),this.$refs.form.resetFields()},reset:function(){this.form={buildingCode:"",buildingProp:"",buildingMonitorStatus:"",permanentPersonNum:0,transientPersonNum:0,rentRoomNum:"",checkBy:"",checkRemark:""}},getDict:function(){var t=this;this.$request.buildFindEnum({blockNo:this.params.blockNo,unitNo:this.params.unitNo,floorNo:this.params.floorNo,roomNo:this.params.roomNo}).then((function(e){200===e.data.status?t.dicList=e.data.data:t.$message.error(e.data.msg)}))},getList:function(){var t=this;this.$request.buildCheckList(this.params).then((function(e){200==e.data.status?(t.tableData=e.data.data.rows,t.total=e.data.data.records,t.params.page=e.data.data.page,t.total<=0?t.hidden=!0:t.hidden=!1):t.$message.error(e.data.msg)}))},getRoom:function(t){var e=this;""!=this.params.floorNo?this.roomParams.code=this.params.blockNo+","+this.params.unitNo+","+this.params.floorNo:""!=this.params.unitNo?this.roomParams.code=this.params.blockNo+","+this.params.unitNo:""!=this.params.blockNo&&(this.roomParams.code=this.params.blockNo),this.roomParams.type=t,this.$request.houseListAll(this.roomParams).then((function(a){0==t?e.houseList=a.data.data:1==t?e.unitList=a.data.data:2==t?e.levelList=a.data.data:3==t&&(e.roomList=a.data.data)}))},chooseRoom:function(t){1==t?(this.params.unitNo="",this.params.floorNo="",this.params.roomNo="",this.unitList=[],this.levelList=[],this.roomList=[]):2==t?(this.params.floorNo="",this.params.roomNo="",this.levelList=[],this.roomList=[]):3==t&&(this.params.roomNo="",this.roomList=[]),this.getRoom(t),this.getList()},handleSizeChange:function(t){this.params.pageSize=t,this.getList()},handleCurrentChange:function(t){this.params.page=t,this.getList()}}},l=(a("IbYl"),a("SsL+")),u=Object(l.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"choose",staticStyle:{background:"#fff"}},[a("el-form",{attrs:{"label-width":"100px"}},[t.houseList.length>0?a("el-form-item",{attrs:{label:"楼栋:"}},[a("el-radio-group",{attrs:{"text-color":"#409EFF",fill:"#fff"},on:{change:function(e){return t.chooseRoom(1)}},model:{value:t.params.blockNo,callback:function(e){t.$set(t.params,"blockNo",e)},expression:"params.blockNo"}},[a("el-radio-button",{attrs:{label:""}},[t._v("全部")]),t._v(" "),t._l(t.houseList,(function(e,o){return a("el-radio-button",{key:o,attrs:{label:e.code}},[t._v(t._s(e.name))])}))],2)],1):t._e(),t._v(" "),t.unitList.length>0?a("el-form-item",{attrs:{label:"单元:"}},[a("el-radio-group",{attrs:{"text-color":"#409EFF",fill:"#fff"},on:{change:function(e){return t.chooseRoom(2)}},model:{value:t.params.unitNo,callback:function(e){t.$set(t.params,"unitNo",e)},expression:"params.unitNo"}},[a("el-radio-button",{attrs:{label:""}},[t._v("全部")]),t._v(" "),t._l(t.unitList,(function(e,o){return a("el-radio-button",{key:o,attrs:{label:e.code}},[t._v(t._s(e.name))])}))],2)],1):t._e(),t._v(" "),t.levelList.length>0?a("el-form-item",{attrs:{label:"楼层:"}},[a("el-radio-group",{attrs:{"text-color":"#409EFF",fill:"#fff"},on:{change:function(e){return t.chooseRoom(3)}},model:{value:t.params.floorNo,callback:function(e){t.$set(t.params,"floorNo",e)},expression:"params.floorNo"}},[a("el-radio-button",{attrs:{label:""}},[t._v("全部")]),t._v(" "),t._l(t.levelList,(function(e,o){return a("el-radio-button",{key:o,attrs:{label:e.code}},[t._v(t._s(e.name))])}))],2)],1):t._e(),t._v(" "),t.roomList.length>0?a("el-form-item",{attrs:{label:"房间号:"}},[a("el-radio-group",{attrs:{"text-color":"#409EFF",fill:"#fff"},on:{change:t.getList},model:{value:t.params.roomNo,callback:function(e){t.$set(t.params,"roomNo",e)},expression:"params.roomNo"}},[a("el-radio-button",{attrs:{label:""}},[t._v("全部")]),t._v(" "),t._l(t.roomList,(function(e,o){return a("el-radio-button",{key:o,attrs:{label:e.code}},[t._v(t._s(e.name))])}))],2)],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"房屋性质:"}},[a("el-radio-group",{attrs:{"text-color":"#409EFF",fill:"#fff"},on:{change:t.getList},model:{value:t.params.buildingProp,callback:function(e){t.$set(t.params,"buildingProp",e)},expression:"params.buildingProp"}},[a("el-radio-button",{attrs:{label:""}},[t._v("全部")]),t._v(" "),t._l(t.dicList.buildPropEnum,(function(e,o){return a("el-radio-button",{key:o,attrs:{label:e.type}},[t._v(t._s(e.value))])}))],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"监管状态:"}},[a("el-radio-group",{attrs:{"text-color":"#409EFF",fill:"#fff"},on:{change:t.getList},model:{value:t.params.buildingMonitorStatus,callback:function(e){t.$set(t.params,"buildingMonitorStatus",e)},expression:"params.buildingMonitorStatus"}},[a("el-radio-button",{attrs:{label:""}},[t._v("全部")]),t._v(" "),t._l(t.dicList.buildingMonitorStatusEnum,(function(e,o){return a("el-radio-button",{key:o,attrs:{label:e.type}},[t._v(t._s(e.value))])}))],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"排查状态:"}},[a("el-radio-group",{attrs:{"text-color":"#409EFF",fill:"#fff"},on:{change:t.getList},model:{value:t.params.buildingCheckStatus,callback:function(e){t.$set(t.params,"buildingCheckStatus",e)},expression:"params.buildingCheckStatus"}},[a("el-radio-button",{attrs:{label:""}},[t._v("全部")]),t._v(" "),t._l(t.dicList.buildingCheckStatusEnum,(function(e,o){return a("el-radio-button",{key:o,attrs:{label:e.type}},[t._v(t._s(e.value))])}))],2)],1)],1)],1),t._v(" "),a("div",{staticClass:"operation"},[a("div",{staticClass:"button"},[a("el-row",{staticClass:"operations-row",attrs:{gutter:10}},[a("el-col",{attrs:{span:1.5}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:t.addList}},[t._v("添加排查记录")])],1),t._v(" "),a("div",{staticClass:"equipment-tongji"},[a("div",{staticClass:"menjin"},[a("i",{staticStyle:{background:"#fead3f"}}),a("span",{staticStyle:{color:"#fead3f"}},[t._v("关注类")])]),t._v(" "),a("div",{staticClass:"menjin"},[a("i",{staticStyle:{background:"#fe6768"}}),a("span",{staticStyle:{color:"#fe6768"}},[t._v("严管类")])]),t._v(" "),a("div",{staticClass:"menjin"},[a("i",{staticStyle:{background:"#5cc372"}}),a("span",{staticStyle:{color:"#5cc372"}},[t._v("放心类")])])])],1)],1)]),t._v(" "),a("div",{staticClass:"list-box"},[t._l(t.tableData,(function(e,o){return a("div",{key:o,staticClass:"list-item",on:{click:function(a){return t.goDetail(e)}}},[a("div",{staticStyle:{padding:"20px"}},[a("div",{staticClass:"item-roomnum"},[a("i",{staticClass:"iconfont icon-kongzhitai"}),t._v(" "),a("span",[t._v(t._s(e.buildingCode))]),t._v(" "),a("div",{staticClass:"leixing",class:0==e.buildingMonitorStatus?"fangxin":1==e.buildingMonitorStatus?"guanzhu":2==e.buildingMonitorStatus?"yanguan":""},[a("i"),a("span",[t._v(t._s(e.buildingMonitorStatusStr))])])]),t._v(" "),a("p",{staticClass:"room-type"},[e.buildingPropStr?a("span",[t._v(t._s(e.buildingPropStr))]):t._e(),e.buildingArea?a("span",[t._v(t._s(e.buildingArea)+"㎡")]):t._e(),a("span",[t._v(t._s(e.roomNum?e.roomNum+"室":"")+t._s(e.hallNum?e.hallNum+"厅":"")+t._s(e.kitchenNum?e.kitchenNum+"厨":"")+t._s(e.washroomNum?e.washroomNum+"卫":""))])]),t._v(" "),a("p",{staticClass:"people-num"},[t._v("\n          常住人口："+t._s(e.permanentPersonNum?e.permanentPersonNum:0)+" 流动人口："+t._s(e.transientPersonNum?e.transientPersonNum:0)+"\n          / 出租房间数："+t._s(e.rentRoomNum?e.rentRoomNum:0)+"\n        ")]),t._v(" "),2==e.buildingCheckStatus?a("p",{staticClass:"time"},[t._v("\n          排查时间："+t._s(e.checkTime)+"\n        ")]):t._e(),t._v(" "),a("p",{staticClass:"nocheck",staticStyle:{"text-align":"right"}},[a("span",{staticClass:"ischeck"},[t._v(t._s(e.buildingCheckStatusStr))])])])])})),t._v(" "),a("div",{staticClass:"pick"}),t._v(" "),a("div",{staticClass:"pick"})],2),t._v(" "),a("div",{staticClass:"pagination",class:{hidden:t.hidden}},[a("el-pagination",{attrs:{background:"","current-page":t.params.page,"page-sizes":[10,20,30,40],"page-size":t.params.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,"before-close":t.cancel,visible:t.open,width:"800px","append-to-body":""},on:{"update:visible":function(e){t.open=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"房屋编码",prop:"buildingCode"}},[a("el-input",{attrs:{placeholder:"请输入房屋编码(例：8-1-5-504)"},model:{value:t.form.buildingCode,callback:function(e){t.$set(t.form,"buildingCode",e)},expression:"form.buildingCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"房屋性质",prop:"buildingProp"}},[a("el-radio-group",{model:{value:t.form.buildingProp,callback:function(e){t.$set(t.form,"buildingProp",e)},expression:"form.buildingProp"}},t._l(t.dicList.buildPropEnum,(function(e,o){return a("el-radio",{key:o,attrs:{label:e.type}},[t._v(t._s(e.value))])})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"监管状态",prop:"buildingMonitorStatus"}},[a("el-radio-group",{model:{value:t.form.buildingMonitorStatus,callback:function(e){t.$set(t.form,"buildingMonitorStatus",e)},expression:"form.buildingMonitorStatus"}},t._l(t.dicList.buildingMonitorStatusEnum,(function(e,o){return a("el-radio",{key:o,attrs:{label:e.type}},[t._v(t._s(e.value))])})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"常住人口数量",prop:"permanentPersonNum"}},[a("el-input",{attrs:{placeholder:"请输入常住人口数量"},model:{value:t.form.permanentPersonNum,callback:function(e){t.$set(t.form,"permanentPersonNum",e)},expression:"form.permanentPersonNum"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"流动人口数量",prop:"transientPersonNum"}},[a("el-input",{attrs:{placeholder:"请输入流动人口数量"},model:{value:t.form.transientPersonNum,callback:function(e){t.$set(t.form,"transientPersonNum",e)},expression:"form.transientPersonNum"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"出租房屋数",prop:"rentRoomNum"}},[a("el-input",{attrs:{placeholder:"请输入出租房屋数"},model:{value:t.form.rentRoomNum,callback:function(e){t.$set(t.form,"rentRoomNum",e)},expression:"form.rentRoomNum"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排查人员",prop:"checkBy"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.checkBy,callback:function(e){t.$set(t.form,"checkBy",e)},expression:"form.checkBy"}},t._l(t.staffList,(function(e){return a("el-option-group",{key:e.label,attrs:{label:e.label}},t._l(e.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"排查备注",prop:"checkRemark"}},[a("el-input",{attrs:{placeholder:"请输入备注"},model:{value:t.form.checkRemark,callback:function(e){t.$set(t.form,"checkRemark",e)},expression:"form.checkRemark"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)}),[],!1,null,"96ae2dd0",null);e.default=u.exports},"7oMQ":function(t,e,a){},"8DEy":function(t,e,a){var o=a("MhL/"),i=a("S5+y");a("k6n4")("keys",(function(){return function(t){return i(o(t))}}))},EPZ6:function(t,e,a){t.exports={default:a("xSEk"),__esModule:!0}},IbYl:function(t,e,a){"use strict";a("7oMQ")},k6n4:function(t,e,a){var o=a("fCtq"),i=a("zpmP"),s=a("mf7F");t.exports=function(t,e){var a=(i.Object||{})[t]||Object[t],r={};r[t]=e(a),o(o.S+o.F*s((function(){a(1)})),"Object",r)}},xSEk:function(t,e,a){a("8DEy"),t.exports=a("zpmP").Object.keys}}]);
//# sourceMappingURL=16.540be09326f18a6f8f21.js.map